"use strict";(()=>{var e={};e.id=252,e.ids=[252],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39785:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>j,patchFetch:()=>v,requestAsyncStorage:()=>w,routeModule:()=>g,serverHooks:()=>C,staticGenerationAsyncStorage:()=>h});var a={};r.r(a),r.d(a,{DELETE:()=>d,GET:()=>p,POST:()=>l,PUT:()=>y});var s=r(73278),n=r(45002),o=r(54877),i=r(71309);r(21060);var c=r(84013);r(60295);var u=r(90684);async function p(e){let t=c.nC.resolve(u.Z),{searchParams:r}=new URL(e.url),a=Object.fromEntries(r.entries());try{let e=await t.getAllCategories(a);return i.NextResponse.json(e)}catch(e){return console.error("Server error:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}async function l(e){let t=c.nC.resolve(u.Z),r=await e.json();try{let e=await t.createCategory(r);return i.NextResponse.json(e,{status:201})}catch(e){return console.error("Server error:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}async function y(e){let t=c.nC.resolve(u.Z),r=await e.json();try{let e=await t.updateCategory(r.id,r);return i.NextResponse.json(e)}catch(e){return console.error("Server error:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}async function d(e){let t=c.nC.resolve(u.Z),r=await e.json();try{return await t.deleteCategory(r.id),i.NextResponse.json({},{status:204})}catch(e){return console.error("Server error:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}let g=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/category/route",pathname:"/api/category",filename:"route",bundlePath:"app/api/category/route"},resolvedPagePath:"/home/roger/github/clouddashboard/app/api/category/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:w,staticGenerationAsyncStorage:h,serverHooks:C}=g,j="/api/category/route";function v(){return(0,o.patchFetch)({serverHooks:C,staticGenerationAsyncStorage:h})}},90684:(e,t,r)=>{r.d(t,{Z:()=>o});var a=r(75565);r(21060);var s=r(84013);class n{constructor(e){this.categoryRepository=e}async getAllCategories(e){return await this.categoryRepository.getAll(e)}async createCategory(e){return await this.categoryRepository.create(e)}async updateCategory(e,t){return await this.categoryRepository.update(e,t)}async deleteCategory(e){return await this.categoryRepository.delete(e)}}let o=n=(0,a.gn)([(0,s.b2)(),(0,a.fM)(0,(0,s.f3)("ICategoryRepository")),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof ICategoryRepository?Object:ICategoryRepository])],n)},60295:(e,t,r)=>{var a=r(84013);let s=require("@prisma/client"),n=new s.PrismaClient;class o{async getAll(e){return await n.category.findMany({where:e?{name:{contains:e.name}}:{},include:{job:!0}})}async getById(e){return await n.category.findUnique({where:{id:e},include:{job:!0}})}async create(e){return await n.category.create({data:e})}async update(e,t){return await n.category.update({where:{id:e},data:t})}async delete(e){return await n.category.delete({where:{id:e}})}}let i=new s.PrismaClient;class c{async create(e){return await i.script.create({data:e})}async getById(e){return await i.script.findUnique({where:{id:e},include:{jobs:!0}})}async getAll(e){return await i.script.findMany({where:e?{name:{contains:e}}:{},include:{jobs:!0}})}async update(e,t){return await i.script.update({where:{id:e},data:t})}async delete(e){return await i.script.delete({where:{id:e}})}}let u=new s.PrismaClient;class p{async create(e){return await u.job.create({data:e})}async getAll(){return await u.job.findMany()}async update(e,t){return await u.job.update({where:{id:e},data:t})}async delete(e){return await u.job.delete({where:{id:e}})}}class l{constructor(){this.prisma=new s.PrismaClient}async create(e){return this.prisma.inputdataset.create({data:e})}async findAll(){return this.prisma.inputdataset.findMany()}async update(e,t){return this.prisma.inputdataset.update({where:{id:e},data:t})}async delete(e){await this.prisma.inputdataset.delete({where:{id:e}})}}let y=new s.PrismaClient;class d{async create(e){return await y.project.create({data:e})}async getAll(){return await y.project.findMany({include:{jobtoproject:{select:{projectId:!0,project:!0,job:!0,inputdataset:!0,outputdataset:!0}}}})}async update(e,t){return await y.project.update({where:{id:e},data:t})}async delete(e){return await y.project.delete({where:{id:e}})}}var g=r(90684);a.nC.register("ICategoryRepository",{useClass:o}),a.nC.register("IProjectRepository",{useClass:d}),a.nC.register("IScriptRepository",{useClass:c}),a.nC.register("IJobRepository",{useClass:p}),a.nC.register("IInputDatasetRepository",{useClass:l}),a.nC.register("CategoryService",{useClass:g.Z})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[379,833,560],()=>r(39785));module.exports=a})();