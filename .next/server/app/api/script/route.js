"use strict";(()=>{var e={};e.id=322,e.ids=[322],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},59176:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>v,requestAsyncStorage:()=>j,routeModule:()=>h,serverHooks:()=>C,staticGenerationAsyncStorage:()=>R});var a={};r.r(a),r.d(a,{DELETE:()=>g,GET:()=>y,POST:()=>d,PUT:()=>w});var s=r(73278),n=r(45002),i=r(54877),o=r(71309);r(21060),r(60295);var c=r(84013),p=r(75565);class u{constructor(e){this.scriptRepository=e}async createScript(e){return await this.scriptRepository.create(e)}async getScriptById(e){return await this.scriptRepository.getById(e)}async getAllScripts(e){return await this.scriptRepository.getAll(e)}async updateScript(e,t){return await this.scriptRepository.update(e,t)}async deleteScript(e){return await this.scriptRepository.delete(e)}}let l=u=(0,p.gn)([(0,c.b2)(),(0,p.fM)(0,(0,c.f3)("IScriptRepository")),(0,p.w6)("design:type",Function),(0,p.w6)("design:paramtypes",["undefined"==typeof IScriptRepository?Object:IScriptRepository])],u);async function y(e){let t=c.nC.resolve(l),{searchParams:r}=new URL(e.url),a=r.get("filter")||"";try{let e=await t.getAllScripts(a);return o.NextResponse.json(e)}catch(e){return console.error("Server error:",e),o.NextResponse.json({error:"Internal server error"},{status:500})}}async function d(e){let t=c.nC.resolve(l),r=await e.json();try{let e=await t.createScript(r);return o.NextResponse.json(e,{status:201})}catch(e){return console.error("Server error:",e),o.NextResponse.json({error:"Internal server error"},{status:500})}}async function w(e){let t=c.nC.resolve(l),r=await e.json();try{let e=await t.updateScript(r.id,r);return o.NextResponse.json(e)}catch(e){return console.error("Server error:",e),o.NextResponse.json({error:"Internal server error"},{status:500})}}async function g(e){let t=c.nC.resolve(l),r=await e.json();try{return await t.deleteScript(r.id),o.NextResponse.json({},{status:204})}catch(e){return console.error("Server error:",e),o.NextResponse.json({error:"Internal server error"},{status:500})}}let h=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/script/route",pathname:"/api/script",filename:"route",bundlePath:"app/api/script/route"},resolvedPagePath:"/home/roger/github/clouddashboard/app/api/script/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:j,staticGenerationAsyncStorage:R,serverHooks:C}=h,m="/api/script/route";function v(){return(0,i.patchFetch)({serverHooks:C,staticGenerationAsyncStorage:R})}},90684:(e,t,r)=>{r.d(t,{Z:()=>i});var a=r(75565);r(21060);var s=r(84013);class n{constructor(e){this.categoryRepository=e}async getAllCategories(e){return await this.categoryRepository.getAll(e)}async createCategory(e){return await this.categoryRepository.create(e)}async updateCategory(e,t){return await this.categoryRepository.update(e,t)}async deleteCategory(e){return await this.categoryRepository.delete(e)}}let i=n=(0,a.gn)([(0,s.b2)(),(0,a.fM)(0,(0,s.f3)("ICategoryRepository")),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",["undefined"==typeof ICategoryRepository?Object:ICategoryRepository])],n)},60295:(e,t,r)=>{var a=r(84013);let s=require("@prisma/client"),n=new s.PrismaClient;class i{async getAll(e){return await n.category.findMany({where:e?{name:{contains:e.name}}:{},include:{job:!0}})}async getById(e){return await n.category.findUnique({where:{id:e},include:{job:!0}})}async create(e){return await n.category.create({data:e})}async update(e,t){return await n.category.update({where:{id:e},data:t})}async delete(e){return await n.category.delete({where:{id:e}})}}let o=new s.PrismaClient;class c{async create(e){return await o.script.create({data:e})}async getById(e){return await o.script.findUnique({where:{id:e},include:{jobs:!0}})}async getAll(e){return await o.script.findMany({where:e?{name:{contains:e}}:{},include:{jobs:!0}})}async update(e,t){return await o.script.update({where:{id:e},data:t})}async delete(e){return await o.script.delete({where:{id:e}})}}let p=new s.PrismaClient;class u{async create(e){return await p.job.create({data:e})}async getAll(){return await p.job.findMany()}async update(e,t){return await p.job.update({where:{id:e},data:t})}async delete(e){return await p.job.delete({where:{id:e}})}}class l{constructor(){this.prisma=new s.PrismaClient}async create(e){return this.prisma.inputdataset.create({data:e})}async findAll(){return this.prisma.inputdataset.findMany()}async update(e,t){return this.prisma.inputdataset.update({where:{id:e},data:t})}async delete(e){await this.prisma.inputdataset.delete({where:{id:e}})}}let y=new s.PrismaClient;class d{async create(e){return await y.project.create({data:e})}async getAll(){return await y.project.findMany({include:{jobtoproject:{select:{projectId:!0,project:!0,job:!0,inputdataset:!0,outputdataset:!0}}}})}async update(e,t){return await y.project.update({where:{id:e},data:t})}async delete(e){return await y.project.delete({where:{id:e}})}}var w=r(90684);a.nC.register("ICategoryRepository",{useClass:i}),a.nC.register("IProjectRepository",{useClass:d}),a.nC.register("IScriptRepository",{useClass:c}),a.nC.register("IJobRepository",{useClass:u}),a.nC.register("IInputDatasetRepository",{useClass:l}),a.nC.register("CategoryService",{useClass:w.Z})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[379,833,560],()=>r(59176));module.exports=a})();