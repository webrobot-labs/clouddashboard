(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[118],{673:(t,e,r)=>{"use strict";r.r(e),r.d(e,{register:()=>iT});var n,o,i,a,s,u,l,c,p,f,_,h={};r.r(h),r.d(h,{DiagConsoleLogger:()=>j,DiagLogLevel:()=>n,INVALID_SPANID:()=>tE,INVALID_SPAN_CONTEXT:()=>tT,INVALID_TRACEID:()=>tg,ProxyTracer:()=>tx,ProxyTracerProvider:()=>tG,ROOT_CONTEXT:()=>V,SamplingDecision:()=>a,SpanKind:()=>s,SpanStatusCode:()=>u,TraceFlags:()=>i,ValueType:()=>o,baggageEntryMetadataFromString:()=>B,context:()=>tK,createContextKey:()=>G,createNoopMeter:()=>ti,createTraceState:()=>tX,default:()=>t5,defaultTextMapGetter:()=>ta,defaultTextMapSetter:()=>ts,diag:()=>tW,isSpanContextValid:()=>tI,isValidSpanId:()=>tN,isValidTraceId:()=>tC,metrics:()=>t$,propagation:()=>t4,trace:()=>t8});var d={};r.r(d),r.d(d,{NOOP_LOGGER:()=>en,NOOP_LOGGER_PROVIDER:()=>ei,NoopLogger:()=>er,NoopLoggerProvider:()=>eo,SeverityNumber:()=>l,logs:()=>eu});var E="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof r.g?r.g:{},g="1.7.0",T=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,y=function(t){var e=new Set([t]),r=new Set,n=t.match(T);if(!n)return function(){return!1};var o={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=o.prerelease)return function(e){return e===t};function i(t){return r.add(t),!1}return function(t){if(e.has(t))return!0;if(r.has(t))return!1;var n=t.match(T);if(!n)return i(t);var a={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};return null!=a.prerelease||o.major!==a.major?i(t):0===o.major?o.minor===a.minor&&o.patch<=a.patch?(e.add(t),!0):i(t):o.minor<=a.minor?(e.add(t),!0):i(t)}}(g),m=Symbol.for("opentelemetry.js.api."+g.split(".")[0]);function v(t,e,r,n){void 0===n&&(n=!1);var o,i=E[m]=null!==(o=E[m])&&void 0!==o?o:{version:g};if(!n&&i[t]){var a=Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(a.stack||a.message),!1}if(i.version!==g){var a=Error("@opentelemetry/api: Registration of version v"+i.version+" for "+t+" does not match previously registered API v"+g);return r.error(a.stack||a.message),!1}return i[t]=e,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+g+"."),!0}function S(t){var e,r,n=null===(e=E[m])||void 0===e?void 0:e.version;if(n&&y(n))return null===(r=E[m])||void 0===r?void 0:r[t]}function A(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+g+".");var r=E[m];r&&delete r[t]}var b=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},O=function(t,e,r){if(r||2==arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},R=function(){function t(t){this._namespace=t.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return L("debug",this._namespace,t)},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return L("error",this._namespace,t)},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return L("info",this._namespace,t)},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return L("warn",this._namespace,t)},t.prototype.verbose=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return L("verbose",this._namespace,t)},t}();function L(t,e,r){var n=S("diag");if(n)return r.unshift(e),n[t].apply(n,O([],b(r),!1))}!function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"}(n||(n={}));var P=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},C=function(t,e,r){if(r||2==arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},N=function(){function t(){function t(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=S("diag");if(n)return n[t].apply(n,C([],P(e),!1))}}var e=this;e.setLogger=function(t,r){if(void 0===r&&(r={logLevel:n.INFO}),t===e){var o,i,a,s=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return e.error(null!==(o=s.stack)&&void 0!==o?o:s.message),!1}"number"==typeof r&&(r={logLevel:r});var u=S("diag"),l=function(t,e){function r(r,n){var o=e[r];return"function"==typeof o&&t>=n?o.bind(e):function(){}}return t<n.NONE?t=n.NONE:t>n.ALL&&(t=n.ALL),e=e||{},{error:r("error",n.ERROR),warn:r("warn",n.WARN),info:r("info",n.INFO),debug:r("debug",n.DEBUG),verbose:r("verbose",n.VERBOSE)}}(null!==(i=r.logLevel)&&void 0!==i?i:n.INFO,t);if(u&&!r.suppressOverrideMessage){var c=null!==(a=Error().stack)&&void 0!==a?a:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+c),l.warn("Current logger will overwrite one already registered from "+c)}return v("diag",l,e,!0)},e.disable=function(){A("diag",e)},e.createComponentLogger=function(t){return new R(t)},e.verbose=t("verbose"),e.debug=t("debug"),e.info=t("info"),e.warn=t("warn"),e.error=t("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}(),I=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},w=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},M=function(){function t(t){this._entries=t?new Map(t):new Map}return t.prototype.getEntry=function(t){var e=this._entries.get(t);if(e)return Object.assign({},e)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(t){var e=I(t,2);return[e[0],e[1]]})},t.prototype.setEntry=function(e,r){var n=new t(this._entries);return n._entries.set(e,r),n},t.prototype.removeEntry=function(e){var r=new t(this._entries);return r._entries.delete(e),r},t.prototype.removeEntries=function(){for(var e,r,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=new t(this._entries);try{for(var a=w(n),s=a.next();!s.done;s=a.next()){var u=s.value;i._entries.delete(u)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i},t.prototype.clear=function(){return new t},t}(),D=Symbol("BaggageEntryMetadata"),U=N.instance();function x(t){return void 0===t&&(t={}),new M(new Map(Object.entries(t)))}function B(t){return"string"!=typeof t&&(U.error("Cannot create baggage metadata from unknown type: "+typeof t),t=""),{__TYPE__:D,toString:function(){return t}}}function G(t){return Symbol.for(t)}var V=new function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(t){return r._currentContext.get(t)},r.setValue=function(e,n){var o=new t(r._currentContext);return o._currentContext.set(e,n),o},r.deleteValue=function(e){var n=new t(r._currentContext);return n._currentContext.delete(e),n}},k=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],j=function(){for(var t=0;t<k.length;t++)this[k[t].n]=function(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(console){var n=console[t];if("function"!=typeof n&&(n=console.log),"function"==typeof n)return n.apply(console,e)}}}(k[t].c)},F=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),H=function(){function t(){}return t.prototype.createHistogram=function(t,e){return tt},t.prototype.createCounter=function(t,e){return J},t.prototype.createUpDownCounter=function(t,e){return te},t.prototype.createObservableGauge=function(t,e){return tn},t.prototype.createObservableCounter=function(t,e){return tr},t.prototype.createObservableUpDownCounter=function(t,e){return to},t.prototype.addBatchObservableCallback=function(t,e){},t.prototype.removeBatchObservableCallback=function(t){},t}(),X=function(){},K=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.add=function(t,e){},e}(X),W=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.add=function(t,e){},e}(X),Y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e.prototype.record=function(t,e){},e}(X),z=function(){function t(){}return t.prototype.addCallback=function(t){},t.prototype.removeCallback=function(t){},t}(),$=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e}(z),q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e}(z),Q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return F(e,t),e}(z),Z=new H,J=new K,tt=new Y,te=new W,tr=new $,tn=new q,to=new Q;function ti(){return Z}!function(t){t[t.INT=0]="INT",t[t.DOUBLE=1]="DOUBLE"}(o||(o={}));var ta={get:function(t,e){if(null!=t)return t[e]},keys:function(t){return null==t?[]:Object.keys(t)}},ts={set:function(t,e,r){null!=t&&(t[e]=r)}},tu=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},tl=function(t,e,r){if(r||2==arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},tc=function(){function t(){}return t.prototype.active=function(){return V},t.prototype.with=function(t,e,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];return e.call.apply(e,tl([r],tu(n),!1))},t.prototype.bind=function(t,e){return e},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}(),tp=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},tf=function(t,e,r){if(r||2==arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},t_="context",th=new tc,td=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(t){return v(t_,t,N.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(t,e,r){for(var n,o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return(n=this._getContextManager()).with.apply(n,tf([t,e,r],tp(o),!1))},t.prototype.bind=function(t,e){return this._getContextManager().bind(t,e)},t.prototype._getContextManager=function(){return S(t_)||th},t.prototype.disable=function(){this._getContextManager().disable(),A(t_,N.instance())},t}();!function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"}(i||(i={}));var tE="0000000000000000",tg="00000000000000000000000000000000",tT={traceId:tg,spanId:tE,traceFlags:i.NONE},ty=function(){function t(t){void 0===t&&(t=tT),this._spanContext=t}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(t,e){return this},t.prototype.setAttributes=function(t){return this},t.prototype.addEvent=function(t,e){return this},t.prototype.setStatus=function(t){return this},t.prototype.updateName=function(t){return this},t.prototype.end=function(t){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(t,e){},t}(),tm=G("OpenTelemetry Context Key SPAN");function tv(t){return t.getValue(tm)||void 0}function tS(){return tv(td.getInstance().active())}function tA(t,e){return t.setValue(tm,e)}function tb(t){return t.deleteValue(tm)}function tO(t,e){return tA(t,new ty(e))}function tR(t){var e;return null===(e=tv(t))||void 0===e?void 0:e.spanContext()}var tL=/^([0-9a-f]{32})$/i,tP=/^[0-9a-f]{16}$/i;function tC(t){return tL.test(t)&&t!==tg}function tN(t){return tP.test(t)&&t!==tE}function tI(t){return tC(t.traceId)&&tN(t.spanId)}function tw(t){return new ty(t)}var tM=td.getInstance(),tD=function(){function t(){}return t.prototype.startSpan=function(t,e,r){if(void 0===r&&(r=tM.active()),null==e?void 0:e.root)return new ty;var n=r&&tR(r);return"object"==typeof n&&"string"==typeof n.spanId&&"string"==typeof n.traceId&&"number"==typeof n.traceFlags&&tI(n)?new ty(n):new ty},t.prototype.startActiveSpan=function(t,e,r,n){if(!(arguments.length<2)){2==arguments.length?a=e:3==arguments.length?(o=e,a=r):(o=e,i=r,a=n);var o,i,a,s=null!=i?i:tM.active(),u=this.startSpan(t,o,s),l=tA(s,u);return tM.with(l,a,void 0,u)}},t}(),tU=new tD,tx=function(){function t(t,e,r,n){this._provider=t,this.name=e,this.version=r,this.options=n}return t.prototype.startSpan=function(t,e,r){return this._getTracer().startSpan(t,e,r)},t.prototype.startActiveSpan=function(t,e,r,n){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):tU},t}(),tB=new(function(){function t(){}return t.prototype.getTracer=function(t,e,r){return new tD},t}()),tG=function(){function t(){}return t.prototype.getTracer=function(t,e,r){var n;return null!==(n=this.getDelegateTracer(t,e,r))&&void 0!==n?n:new tx(this,t,e,r)},t.prototype.getDelegate=function(){var t;return null!==(t=this._delegate)&&void 0!==t?t:tB},t.prototype.setDelegate=function(t){this._delegate=t},t.prototype.getDelegateTracer=function(t,e,r){var n;return null===(n=this._delegate)||void 0===n?void 0:n.getTracer(t,e,r)},t}();!function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(a||(a={})),function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"}(s||(s={})),function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"}(u||(u={}));var tV="[_0-9a-z-*/]",tk=RegExp("^(?:[a-z]"+tV+"{0,255}|"+("[a-z0-9]"+tV)+"{0,240}@[a-z]"+tV+"{0,13})$"),tj=/^[ -~]{0,255}[!-~]$/,tF=/,|=/,tH=function(){function t(t){this._internalState=new Map,t&&this._parse(t)}return t.prototype.set=function(t,e){var r=this._clone();return r._internalState.has(t)&&r._internalState.delete(t),r._internalState.set(t,e),r},t.prototype.unset=function(t){var e=this._clone();return e._internalState.delete(t),e},t.prototype.get=function(t){return this._internalState.get(t)},t.prototype.serialize=function(){var t=this;return this._keys().reduce(function(e,r){return e.push(r+"="+t.get(r)),e},[]).join(",")},t.prototype._parse=function(t){!(t.length>512)&&(this._internalState=t.split(",").reverse().reduce(function(t,e){var r=e.trim(),n=r.indexOf("=");if(-1!==n){var o=r.slice(0,n),i=r.slice(n+1,e.length);tk.test(o)&&tj.test(i)&&!tF.test(i)&&t.set(o,i)}return t},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},t.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},t.prototype._clone=function(){var e=new t;return e._internalState=new Map(this._internalState),e},t}();function tX(t){return new tH(t)}var tK=td.getInstance(),tW=N.instance(),tY=new(function(){function t(){}return t.prototype.getMeter=function(t,e,r){return Z},t}()),tz="metrics",t$=(function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(t){return v(tz,t,N.instance())},t.prototype.getMeterProvider=function(){return S(tz)||tY},t.prototype.getMeter=function(t,e,r){return this.getMeterProvider().getMeter(t,e,r)},t.prototype.disable=function(){A(tz,N.instance())},t})().getInstance(),tq=function(){function t(){}return t.prototype.inject=function(t,e){},t.prototype.extract=function(t,e){return t},t.prototype.fields=function(){return[]},t}(),tQ=G("OpenTelemetry Baggage Key");function tZ(t){return t.getValue(tQ)||void 0}function tJ(){return tZ(td.getInstance().active())}function t0(t,e){return t.setValue(tQ,e)}function t1(t){return t.deleteValue(tQ)}var t2="propagation",t3=new tq,t4=(function(){function t(){this.createBaggage=x,this.getBaggage=tZ,this.getActiveBaggage=tJ,this.setBaggage=t0,this.deleteBaggage=t1}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(t){return v(t2,t,N.instance())},t.prototype.inject=function(t,e,r){return void 0===r&&(r=ts),this._getGlobalPropagator().inject(t,e,r)},t.prototype.extract=function(t,e,r){return void 0===r&&(r=ta),this._getGlobalPropagator().extract(t,e,r)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){A(t2,N.instance())},t.prototype._getGlobalPropagator=function(){return S(t2)||t3},t})().getInstance(),t6="trace",t8=(function(){function t(){this._proxyTracerProvider=new tG,this.wrapSpanContext=tw,this.isSpanContextValid=tI,this.deleteSpan=tb,this.getSpan=tv,this.getActiveSpan=tS,this.getSpanContext=tR,this.setSpan=tA,this.setSpanContext=tO}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(t){var e=v(t6,this._proxyTracerProvider,N.instance());return e&&this._proxyTracerProvider.setDelegate(t),e},t.prototype.getTracerProvider=function(){return S(t6)||this._proxyTracerProvider},t.prototype.getTracer=function(t,e){return this.getTracerProvider().getTracer(t,e)},t.prototype.disable=function(){A(t6,N.instance()),this._proxyTracerProvider=new tG},t})().getInstance();let t5={context:tK,diag:tW,metrics:t$,propagation:t4,trace:t8},t9=require("node:async_hooks");var t7=r.t(t9,2);let et=require("node:events");var ee=r.t(et,2);!function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.TRACE=1]="TRACE",t[t.TRACE2=2]="TRACE2",t[t.TRACE3=3]="TRACE3",t[t.TRACE4=4]="TRACE4",t[t.DEBUG=5]="DEBUG",t[t.DEBUG2=6]="DEBUG2",t[t.DEBUG3=7]="DEBUG3",t[t.DEBUG4=8]="DEBUG4",t[t.INFO=9]="INFO",t[t.INFO2=10]="INFO2",t[t.INFO3=11]="INFO3",t[t.INFO4=12]="INFO4",t[t.WARN=13]="WARN",t[t.WARN2=14]="WARN2",t[t.WARN3=15]="WARN3",t[t.WARN4=16]="WARN4",t[t.ERROR=17]="ERROR",t[t.ERROR2=18]="ERROR2",t[t.ERROR3=19]="ERROR3",t[t.ERROR4=20]="ERROR4",t[t.FATAL=21]="FATAL",t[t.FATAL2=22]="FATAL2",t[t.FATAL3=23]="FATAL3",t[t.FATAL4=24]="FATAL4"}(l||(l={}));var er=function(){function t(){}return t.prototype.emit=function(t){},t}(),en=new er,eo=function(){function t(){}return t.prototype.getLogger=function(t,e,r){return new er},t}(),ei=new eo,ea="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof r.g?r.g:{},es=Symbol.for("io.opentelemetry.js.api.logs"),eu=(function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalLoggerProvider=function(t){return ea[es]?this.getLoggerProvider():(ea[es]=function(e){return 1===e?t:ei},t)},t.prototype.getLoggerProvider=function(){var t,e;return null!==(e=null===(t=ea[es])||void 0===t?void 0:t.call(ea,1))&&void 0!==e?e:ei},t.prototype.getLogger=function(t,e,r){return this.getLoggerProvider().getLogger(t,e,r)},t.prototype.disable=function(){delete ea[es]},t})().getInstance();void 0===globalThis.performance&&(globalThis.performance={timeOrigin:0,now:()=>Date.now()});var el=Object.create,ec=Object.defineProperty,ep=Object.getOwnPropertyDescriptor,ef=Object.getOwnPropertyNames,e_=Object.getPrototypeOf,eh=Object.prototype.hasOwnProperty,ed=(t,e)=>()=>(t&&(e=t(t=0)),e),eE=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),eg=(t,e,r,n)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let o of ef(e))eh.call(t,o)||o===r||ec(t,o,{get:()=>e[o],enumerable:!(n=ep(e,o))||n.enumerable});return t},eT=(t,e,r)=>(eg(t,e,"default"),r&&eg(r,e,"default")),ey=(t,e,r)=>(r=null!=t?el(e_(t)):{},eg(!e&&t&&t.__esModule?r:ec(r,"default",{value:t,enumerable:!0}),t)),em=t=>eg(ec({},"__esModule",{value:!0}),t),ev={},eS=ed(()=>{eT(ev,h)}),eA=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isTracingSuppressed=t.unsuppressTracing=t.suppressTracing=void 0;var e=(0,(eS(),em(ev)).createContextKey)("OpenTelemetry SDK Context Key SUPPRESS_TRACING");t.suppressTracing=function(t){return t.setValue(e,!0)},t.unsuppressTracing=function(t){return t.deleteValue(e)},t.isTracingSuppressed=function(t){return!0===t.getValue(e)}}),eb=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BAGGAGE_MAX_TOTAL_LENGTH=t.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=t.BAGGAGE_MAX_NAME_VALUE_PAIRS=t.BAGGAGE_HEADER=t.BAGGAGE_ITEMS_SEPARATOR=t.BAGGAGE_PROPERTIES_SEPARATOR=t.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,t.BAGGAGE_KEY_PAIR_SEPARATOR="=",t.BAGGAGE_PROPERTIES_SEPARATOR=";",t.BAGGAGE_ITEMS_SEPARATOR=",",t.BAGGAGE_HEADER="baggage",t.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,t.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,t.BAGGAGE_MAX_TOTAL_LENGTH=8192}),eO=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseKeyPairsIntoRecord=t.parsePairKeyValue=t.getKeyPairs=t.serializeKeyPairs=void 0;var e=(eS(),em(ev)),r=eb();function n(t){let n=t.split(r.BAGGAGE_PROPERTIES_SEPARATOR);if(n.length<=0)return;let o=n.shift();if(!o)return;let i=o.indexOf(r.BAGGAGE_KEY_PAIR_SEPARATOR);if(i<=0)return;let a=decodeURIComponent(o.substring(0,i).trim()),s=decodeURIComponent(o.substring(i+1).trim()),u;return n.length>0&&(u=(0,e.baggageEntryMetadataFromString)(n.join(r.BAGGAGE_PROPERTIES_SEPARATOR))),{key:a,value:s,metadata:u}}t.serializeKeyPairs=function(t){return t.reduce((t,e)=>{let n=`${t}${""!==t?r.BAGGAGE_ITEMS_SEPARATOR:""}${e}`;return n.length>r.BAGGAGE_MAX_TOTAL_LENGTH?t:n},"")},t.getKeyPairs=function(t){return t.getAllEntries().map(([t,e])=>{let n=`${encodeURIComponent(t)}=${encodeURIComponent(e.value)}`;return void 0!==e.metadata&&(n+=r.BAGGAGE_PROPERTIES_SEPARATOR+e.metadata.toString()),n})},t.parsePairKeyValue=n,t.parseKeyPairsIntoRecord=function(t){return"string"!=typeof t||0===t.length?{}:t.split(r.BAGGAGE_ITEMS_SEPARATOR).map(t=>n(t)).filter(t=>void 0!==t&&t.value.length>0).reduce((t,e)=>(t[e.key]=e.value,t),{})}}),eR=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.W3CBaggagePropagator=void 0;var e=(eS(),em(ev)),r=eA(),n=eb(),o=eO(),i=class{inject(t,i,a){let s=e.propagation.getBaggage(t);if(!s||(0,r.isTracingSuppressed)(t))return;let u=(0,o.getKeyPairs)(s).filter(t=>t.length<=n.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,n.BAGGAGE_MAX_NAME_VALUE_PAIRS),l=(0,o.serializeKeyPairs)(u);l.length>0&&a.set(i,n.BAGGAGE_HEADER,l)}extract(t,r,i){let a=i.get(r,n.BAGGAGE_HEADER),s=Array.isArray(a)?a.join(n.BAGGAGE_ITEMS_SEPARATOR):a;if(!s)return t;let u={};return 0===s.length||(s.split(n.BAGGAGE_ITEMS_SEPARATOR).forEach(t=>{let e=(0,o.parsePairKeyValue)(t);if(e){let t={value:e.value};e.metadata&&(t.metadata=e.metadata),u[e.key]=t}}),0===Object.entries(u).length)?t:e.propagation.setBaggage(t,e.propagation.createBaggage(u))}fields(){return[n.BAGGAGE_HEADER]}};t.W3CBaggagePropagator=i}),eL=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnchoredClock=void 0,t.AnchoredClock=class{constructor(t,e){this._monotonicClock=e,this._epochMillis=t.now(),this._performanceMillis=e.now()}now(){let t=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+t}}}),eP=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isAttributeValue=t.isAttributeKey=t.sanitizeAttributes=void 0;var e=(eS(),em(ev));function r(t){return"string"==typeof t&&t.length>0}function n(t){return null==t||(Array.isArray(t)?function(t){let e;for(let r of t)if(null!=r){if(!e){if(o(r)){e=typeof r;continue}return!1}if(typeof r!==e)return!1}return!0}(t):o(t))}function o(t){switch(typeof t){case"number":case"boolean":case"string":return!0}return!1}t.sanitizeAttributes=function(t){let o={};if("object"!=typeof t||null==t)return o;for(let[i,a]of Object.entries(t)){if(!r(i)){e.diag.warn(`Invalid attribute key: ${i}`);continue}if(!n(a)){e.diag.warn(`Invalid attribute value set for key: ${i}`);continue}Array.isArray(a)?o[i]=a.slice():o[i]=a}return o},t.isAttributeKey=r,t.isAttributeValue=n}),eC=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loggingErrorHandler=void 0;var e=(eS(),em(ev));t.loggingErrorHandler=function(){return t=>{e.diag.error("string"==typeof t?t:JSON.stringify(function(t){let e={},r=t;for(;null!==r;)Object.getOwnPropertyNames(r).forEach(t=>{if(e[t])return;let n=r[t];n&&(e[t]=String(n))}),r=Object.getPrototypeOf(r);return e}(t)))}}}),eN=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.globalErrorHandler=t.setGlobalErrorHandler=void 0;var e=(0,eC().loggingErrorHandler)();t.setGlobalErrorHandler=function(t){e=t},t.globalErrorHandler=function(t){try{e(t)}catch{}}}),eI=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TracesSamplerValues=void 0,function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"}(t.TracesSamplerValues||(t.TracesSamplerValues={}))}),ew=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t._globalThis=void 0,t._globalThis="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:{}}),eM=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEnvWithoutDefaults=t.parseEnvironment=t.DEFAULT_ENVIRONMENT=t.DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT=t.DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT=t.DEFAULT_ATTRIBUTE_COUNT_LIMIT=t.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=void 0;var e=(eS(),em(ev)),r=eI(),n=ew(),o=["OTEL_SDK_DISABLED"],i=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"],a=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];t.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=1/0,t.DEFAULT_ATTRIBUTE_COUNT_LIMIT=128,t.DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT=128,t.DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT=128,t.DEFAULT_ENVIRONMENT={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:e.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:t.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_ATTRIBUTE_COUNT_LIMIT:t.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:t.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:t.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:t.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:t.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:t.DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:t.DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:r.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};var s={ALL:e.DiagLogLevel.ALL,VERBOSE:e.DiagLogLevel.VERBOSE,DEBUG:e.DiagLogLevel.DEBUG,INFO:e.DiagLogLevel.INFO,WARN:e.DiagLogLevel.WARN,ERROR:e.DiagLogLevel.ERROR,NONE:e.DiagLogLevel.NONE};function u(e){let r={};for(let n in t.DEFAULT_ENVIRONMENT)if("OTEL_LOG_LEVEL"===n)!function(t,e,r){let n=r[t];if("string"==typeof n){let r=s[n.toUpperCase()];null!=r&&(e[t]=r)}}(n,r,e);else if(o.indexOf(n)>-1)!function(t,e,r){if(typeof r[t]>"u")return;let n=String(r[t]);e[t]="true"===n.toLowerCase()}(n,r,e);else if(i.indexOf(n)>-1)!function(t,e,r,n=-1/0,o=1/0){if("u">typeof r[t]){let i=Number(r[t]);isNaN(i)||(i<n?e[t]=n:i>o?e[t]=o:e[t]=i)}}(n,r,e);else if(a.indexOf(n)>-1)!function(t,e,r,n=","){let o=r[t];"string"==typeof o&&(e[t]=o.split(n).map(t=>t.trim()))}(n,r,e);else{let t=e[n];"u">typeof t&&null!==t&&(r[n]=String(t))}return r}t.parseEnvironment=u,t.getEnvWithoutDefaults=function(){return"u">typeof process&&process&&process.env?u(process.env):u(n._globalThis)}}),eD=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEnv=void 0;var e=eM(),r=ew();t.getEnv=function(){let t=(0,e.parseEnvironment)(r._globalThis);return Object.assign({},e.DEFAULT_ENVIRONMENT,t)}}),eU=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hexToBase64=void 0,t.hexToBase64=function(t){let e=t.length,r="";for(let n=0;n<e;n+=2)r+=String.fromCharCode(parseInt(t.substring(n,n+2),16));return btoa(r)}}),ex=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RandomIdGenerator=void 0,t.RandomIdGenerator=class{constructor(){this.generateTraceId=r(16),this.generateSpanId=r(8)}};var e=Array(32);function r(t){return function(){for(let r=0;r<2*t;r++)e[r]=Math.floor(16*Math.random())+48,e[r]>=58&&(e[r]+=39);return String.fromCharCode.apply(null,e.slice(0,2*t))}}}),eB=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.otperformance=void 0,t.otperformance=performance}),eG=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="1.19.0"}),eV=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageTypeValues=t.RpcGrpcStatusCodeValues=t.MessagingOperationValues=t.MessagingDestinationKindValues=t.HttpFlavorValues=t.NetHostConnectionSubtypeValues=t.NetHostConnectionTypeValues=t.NetTransportValues=t.FaasInvokedProviderValues=t.FaasDocumentOperationValues=t.FaasTriggerValues=t.DbCassandraConsistencyLevelValues=t.DbSystemValues=t.SemanticAttributes=void 0,t.SemanticAttributes={AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"},t.DbSystemValues={OTHER_SQL:"other_sql",MSSQL:"mssql",MYSQL:"mysql",ORACLE:"oracle",DB2:"db2",POSTGRESQL:"postgresql",REDSHIFT:"redshift",HIVE:"hive",CLOUDSCAPE:"cloudscape",HSQLDB:"hsqldb",PROGRESS:"progress",MAXDB:"maxdb",HANADB:"hanadb",INGRES:"ingres",FIRSTSQL:"firstsql",EDB:"edb",CACHE:"cache",ADABAS:"adabas",FIREBIRD:"firebird",DERBY:"derby",FILEMAKER:"filemaker",INFORMIX:"informix",INSTANTDB:"instantdb",INTERBASE:"interbase",MARIADB:"mariadb",NETEZZA:"netezza",PERVASIVE:"pervasive",POINTBASE:"pointbase",SQLITE:"sqlite",SYBASE:"sybase",TERADATA:"teradata",VERTICA:"vertica",H2:"h2",COLDFUSION:"coldfusion",CASSANDRA:"cassandra",HBASE:"hbase",MONGODB:"mongodb",REDIS:"redis",COUCHBASE:"couchbase",COUCHDB:"couchdb",COSMOSDB:"cosmosdb",DYNAMODB:"dynamodb",NEO4J:"neo4j",GEODE:"geode",ELASTICSEARCH:"elasticsearch",MEMCACHED:"memcached",COCKROACHDB:"cockroachdb"},t.DbCassandraConsistencyLevelValues={ALL:"all",EACH_QUORUM:"each_quorum",QUORUM:"quorum",LOCAL_QUORUM:"local_quorum",ONE:"one",TWO:"two",THREE:"three",LOCAL_ONE:"local_one",ANY:"any",SERIAL:"serial",LOCAL_SERIAL:"local_serial"},t.FaasTriggerValues={DATASOURCE:"datasource",HTTP:"http",PUBSUB:"pubsub",TIMER:"timer",OTHER:"other"},t.FaasDocumentOperationValues={INSERT:"insert",EDIT:"edit",DELETE:"delete"},t.FaasInvokedProviderValues={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},t.NetTransportValues={IP_TCP:"ip_tcp",IP_UDP:"ip_udp",IP:"ip",UNIX:"unix",PIPE:"pipe",INPROC:"inproc",OTHER:"other"},t.NetHostConnectionTypeValues={WIFI:"wifi",WIRED:"wired",CELL:"cell",UNAVAILABLE:"unavailable",UNKNOWN:"unknown"},t.NetHostConnectionSubtypeValues={GPRS:"gprs",EDGE:"edge",UMTS:"umts",CDMA:"cdma",EVDO_0:"evdo_0",EVDO_A:"evdo_a",CDMA2000_1XRTT:"cdma2000_1xrtt",HSDPA:"hsdpa",HSUPA:"hsupa",HSPA:"hspa",IDEN:"iden",EVDO_B:"evdo_b",LTE:"lte",EHRPD:"ehrpd",HSPAP:"hspap",GSM:"gsm",TD_SCDMA:"td_scdma",IWLAN:"iwlan",NR:"nr",NRNSA:"nrnsa",LTE_CA:"lte_ca"},t.HttpFlavorValues={HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:"SPDY",QUIC:"QUIC"},t.MessagingDestinationKindValues={QUEUE:"queue",TOPIC:"topic"},t.MessagingOperationValues={RECEIVE:"receive",PROCESS:"process"},t.RpcGrpcStatusCodeValues={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16},t.MessageTypeValues={SENT:"SENT",RECEIVED:"RECEIVED"}}),ek=eE(t=>{var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__exportStar||function(t,r){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||e(r,t,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(eV(),t)}),ej=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetrySdkLanguageValues=t.OsTypeValues=t.HostArchValues=t.AwsEcsLaunchtypeValues=t.CloudPlatformValues=t.CloudProviderValues=t.SemanticResourceAttributes=void 0,t.SemanticResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},t.CloudProviderValues={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},t.CloudPlatformValues={ALIBABA_CLOUD_ECS:"alibaba_cloud_ecs",ALIBABA_CLOUD_FC:"alibaba_cloud_fc",AWS_EC2:"aws_ec2",AWS_ECS:"aws_ecs",AWS_EKS:"aws_eks",AWS_LAMBDA:"aws_lambda",AWS_ELASTIC_BEANSTALK:"aws_elastic_beanstalk",AZURE_VM:"azure_vm",AZURE_CONTAINER_INSTANCES:"azure_container_instances",AZURE_AKS:"azure_aks",AZURE_FUNCTIONS:"azure_functions",AZURE_APP_SERVICE:"azure_app_service",GCP_COMPUTE_ENGINE:"gcp_compute_engine",GCP_CLOUD_RUN:"gcp_cloud_run",GCP_KUBERNETES_ENGINE:"gcp_kubernetes_engine",GCP_CLOUD_FUNCTIONS:"gcp_cloud_functions",GCP_APP_ENGINE:"gcp_app_engine"},t.AwsEcsLaunchtypeValues={EC2:"ec2",FARGATE:"fargate"},t.HostArchValues={AMD64:"amd64",ARM32:"arm32",ARM64:"arm64",IA64:"ia64",PPC32:"ppc32",PPC64:"ppc64",X86:"x86"},t.OsTypeValues={WINDOWS:"windows",LINUX:"linux",DARWIN:"darwin",FREEBSD:"freebsd",NETBSD:"netbsd",OPENBSD:"openbsd",DRAGONFLYBSD:"dragonflybsd",HPUX:"hpux",AIX:"aix",SOLARIS:"solaris",Z_OS:"z_os"},t.TelemetrySdkLanguageValues={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"}}),eF=eE(t=>{var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__exportStar||function(t,r){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||e(r,t,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(ej(),t)}),eH=eE(t=>{var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__exportStar||function(t,r){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||e(r,t,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(ek(),t),r(eF(),t)}),eX=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SDK_INFO=void 0;var e=eG(),r=eH();t.SDK_INFO={[r.SemanticResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[r.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]:"browser",[r.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.TelemetrySdkLanguageValues.WEBJS,[r.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]:e.VERSION}}),eK=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unrefTimer=void 0,t.unrefTimer=function(t){}}),eW=eE(t=>{var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__exportStar||function(t,r){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||e(r,t,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(eD(),t),r(ew(),t),r(eU(),t),r(ex(),t),r(eB(),t),r(eX(),t),r(eK(),t)}),eY=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addHrTimes=t.isTimeInput=t.isTimeInputHrTime=t.hrTimeToMicroseconds=t.hrTimeToMilliseconds=t.hrTimeToNanoseconds=t.hrTimeToTimeStamp=t.hrTimeDuration=t.timeInputToHrTime=t.hrTime=t.getTimeOrigin=t.millisToHrTime=void 0;var e=eW();function r(t){return[Math.trunc(t/1e3),Math.round(t%1e3*1e6)]}function n(){let t=e.otperformance.timeOrigin;if("number"!=typeof t){let r=e.otperformance;t=r.timing&&r.timing.fetchStart}return t}function o(t){return a(r(n()),r("number"==typeof t?t:e.otperformance.now()))}function i(t){return Array.isArray(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]}function a(t,e){let r=[t[0]+e[0],t[1]+e[1]];return r[1]>=1e9&&(r[1]-=1e9,r[0]+=1),r}t.millisToHrTime=r,t.getTimeOrigin=n,t.hrTime=o,t.timeInputToHrTime=function(t){if(i(t))return t;if("number"==typeof t)return t<n()?o(t):r(t);if(t instanceof Date)return r(t.getTime());throw TypeError("Invalid input type")},t.hrTimeDuration=function(t,e){let r=e[0]-t[0],n=e[1]-t[1];return n<0&&(r-=1,n+=1e9),[r,n]},t.hrTimeToTimeStamp=function(t){let e=`${"0".repeat(9)}${t[1]}Z`,r=e.substr(e.length-9-1);return new Date(1e3*t[0]).toISOString().replace("000Z",r)},t.hrTimeToNanoseconds=function(t){return 1e9*t[0]+t[1]},t.hrTimeToMilliseconds=function(t){return 1e3*t[0]+t[1]/1e6},t.hrTimeToMicroseconds=function(t){return 1e6*t[0]+t[1]/1e3},t.isTimeInputHrTime=i,t.isTimeInput=function(t){return i(t)||"number"==typeof t||t instanceof Date},t.addHrTimes=a}),ez=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0})}),e$=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExportResultCode=void 0,function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"}(t.ExportResultCode||(t.ExportResultCode={}))}),eq=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CompositePropagator=void 0;var e=(eS(),em(ev)),r=class{constructor(t={}){var e;this._propagators=null!==(e=t.propagators)&&void 0!==e?e:[],this._fields=Array.from(new Set(this._propagators.map(t=>"function"==typeof t.fields?t.fields():[]).reduce((t,e)=>t.concat(e),[])))}inject(t,r,n){for(let o of this._propagators)try{o.inject(t,r,n)}catch(t){e.diag.warn(`Failed to inject with ${o.constructor.name}. Err: ${t.message}`)}}extract(t,r,n){return this._propagators.reduce((t,o)=>{try{return o.extract(t,r,n)}catch(t){e.diag.warn(`Failed to inject with ${o.constructor.name}. Err: ${t.message}`)}return t},t)}fields(){return this._fields.slice()}};t.CompositePropagator=r}),eQ=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateValue=t.validateKey=void 0;var e="[_0-9a-z-*/]",r=`[a-z]${e}{0,255}`,n=`[a-z0-9]${e}{0,240}@[a-z]${e}{0,13}`,o=RegExp(`^(?:${r}|${n})$`),i=/^[ -~]{0,255}[!-~]$/,a=/,|=/;t.validateKey=function(t){return o.test(t)},t.validateValue=function(t){return i.test(t)&&!a.test(t)}}),eZ=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceState=void 0;var e=eQ(),r=class t{constructor(t){this._internalState=new Map,t&&this._parse(t)}set(t,e){let r=this._clone();return r._internalState.has(t)&&r._internalState.delete(t),r._internalState.set(t,e),r}unset(t){let e=this._clone();return e._internalState.delete(t),e}get(t){return this._internalState.get(t)}serialize(){return this._keys().reduce((t,e)=>(t.push(e+"="+this.get(e)),t),[]).join(",")}_parse(t){t.length>512||(this._internalState=t.split(",").reverse().reduce((t,r)=>{let n=r.trim(),o=n.indexOf("=");if(-1!==o){let i=n.slice(0,o),a=n.slice(o+1,r.length);(0,e.validateKey)(i)&&(0,e.validateValue)(a)&&t.set(i,a)}return t},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new t;return e._internalState=new Map(this._internalState),e}};t.TraceState=r}),eJ=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.W3CTraceContextPropagator=t.parseTraceParent=t.TRACE_STATE_HEADER=t.TRACE_PARENT_HEADER=void 0;var e=(eS(),em(ev)),r=eA(),n=eZ();t.TRACE_PARENT_HEADER="traceparent",t.TRACE_STATE_HEADER="tracestate";var o=RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");function i(t){let e=o.exec(t);return!e||"00"===e[1]&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}t.parseTraceParent=i;var a=class{inject(n,o,i){let a=e.trace.getSpanContext(n);if(!a||(0,r.isTracingSuppressed)(n)||!(0,e.isSpanContextValid)(a))return;let s=`00-${a.traceId}-${a.spanId}-0${Number(a.traceFlags||e.TraceFlags.NONE).toString(16)}`;i.set(o,t.TRACE_PARENT_HEADER,s),a.traceState&&i.set(o,t.TRACE_STATE_HEADER,a.traceState.serialize())}extract(r,o,a){let s=a.get(o,t.TRACE_PARENT_HEADER);if(!s)return r;let u=Array.isArray(s)?s[0]:s;if("string"!=typeof u)return r;let l=i(u);if(!l)return r;l.isRemote=!0;let c=a.get(o,t.TRACE_STATE_HEADER);if(c){let t=Array.isArray(c)?c.join(","):c;l.traceState=new n.TraceState("string"==typeof t?t:void 0)}return e.trace.setSpanContext(r,l)}fields(){return[t.TRACE_PARENT_HEADER,t.TRACE_STATE_HEADER]}};t.W3CTraceContextPropagator=a}),e0=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0})}),e1=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRPCMetadata=t.deleteRPCMetadata=t.setRPCMetadata=t.RPCType=void 0;var e=(0,(eS(),em(ev)).createContextKey)("OpenTelemetry SDK Context Key RPC_METADATA");(t.RPCType||(t.RPCType={})).HTTP="http",t.setRPCMetadata=function(t,r){return t.setValue(e,r)},t.deleteRPCMetadata=function(t){return t.deleteValue(e)},t.getRPCMetadata=function(t){return t.getValue(e)}}),e2=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AlwaysOffSampler=void 0;var e=(eS(),em(ev));t.AlwaysOffSampler=class{shouldSample(){return{decision:e.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}}),e3=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AlwaysOnSampler=void 0;var e=(eS(),em(ev));t.AlwaysOnSampler=class{shouldSample(){return{decision:e.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}}),e4=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ParentBasedSampler=void 0;var e=(eS(),em(ev)),r=eN(),n=e2(),o=e3(),i=class{constructor(t){var e,i,a,s;this._root=t.root,this._root||((0,r.globalErrorHandler)(Error("ParentBasedSampler must have a root sampler configured")),this._root=new o.AlwaysOnSampler),this._remoteParentSampled=null!==(e=t.remoteParentSampled)&&void 0!==e?e:new o.AlwaysOnSampler,this._remoteParentNotSampled=null!==(i=t.remoteParentNotSampled)&&void 0!==i?i:new n.AlwaysOffSampler,this._localParentSampled=null!==(a=t.localParentSampled)&&void 0!==a?a:new o.AlwaysOnSampler,this._localParentNotSampled=null!==(s=t.localParentNotSampled)&&void 0!==s?s:new n.AlwaysOffSampler}shouldSample(t,r,n,o,i,a){let s=e.trace.getSpanContext(t);return s&&(0,e.isSpanContextValid)(s)?s.isRemote?s.traceFlags&e.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(t,r,n,o,i,a):this._remoteParentNotSampled.shouldSample(t,r,n,o,i,a):s.traceFlags&e.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(t,r,n,o,i,a):this._localParentNotSampled.shouldSample(t,r,n,o,i,a):this._root.shouldSample(t,r,n,o,i,a)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};t.ParentBasedSampler=i}),e6=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceIdRatioBasedSampler=void 0;var e=(eS(),em(ev)),r=class{constructor(t=0){this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(4294967295*this._ratio)}shouldSample(t,r){return{decision:(0,e.isValidTraceId)(r)&&this._accumulate(r)<this._upperBound?e.SamplingDecision.RECORD_AND_SAMPLED:e.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(t){return"number"!=typeof t||isNaN(t)?0:t>=1?1:t<=0?0:t}_accumulate(t){let e=0;for(let r=0;r<t.length/8;r++){let n=8*r;e=(e^parseInt(t.slice(n,n+8),16))>>>0}return e}};t.TraceIdRatioBasedSampler=r}),e8=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isPlainObject=void 0;var e,r,n=Function.prototype.toString,o=n.call(Object),i=(e=Object.getPrototypeOf,r=Object,function(t){return e(r(t))}),a=Object.prototype,s=a.hasOwnProperty,u=Symbol?Symbol.toStringTag:void 0,l=a.toString;t.isPlainObject=function(t){if(!(null!=t&&"object"==typeof t)||"[object Object]"!==(null==t?void 0===t?"[object Undefined]":"[object Null]":u&&u in Object(t)?function(t){let e=s.call(t,u),r=t[u],n=!1;try{t[u]=void 0,n=!0}catch{}let o=l.call(t);return n&&(e?t[u]=r:delete t[u]),o}(t):l.call(t)))return!1;let e=i(t);if(null===e)return!0;let r=s.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&n.call(r)===o}}),e5=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.merge=void 0;var e=e8();function r(t){return o(t)?t.slice():t}function n(t,e,r){let n=r.get(t[e])||[];for(let r=0,o=n.length;r<o;r++){let o=n[r];if(o.key===e&&o.obj===t)return!0}return!1}function o(t){return Array.isArray(t)}function i(t){return"function"==typeof t}function a(t){return!s(t)&&!o(t)&&!i(t)&&"object"==typeof t}function s(t){return"string"==typeof t||"number"==typeof t||"boolean"==typeof t||typeof t>"u"||t instanceof Date||t instanceof RegExp||null===t}t.merge=function(...t){let u=t.shift(),l=new WeakMap;for(;t.length>0;)u=function t(u,l,c=0,p){let f;if(!(c>20)){if(c++,s(u)||s(l)||i(l))f=r(l);else if(o(u)){if(f=u.slice(),o(l))for(let t=0,e=l.length;t<e;t++)f.push(r(l[t]));else if(a(l)){let t=Object.keys(l);for(let e=0,n=t.length;e<n;e++){let n=t[e];f[n]=r(l[n])}}}else if(a(u)){if(a(l)){if(!(0,e.isPlainObject)(u)||!(0,e.isPlainObject)(l))return l;f=Object.assign({},u);let r=Object.keys(l);for(let e=0,o=r.length;e<o;e++){let o=r[e],i=l[o];if(s(i))typeof i>"u"?delete f[o]:f[o]=i;else{let e=f[o];if(n(u,o,p)||n(l,o,p))delete f[o];else{if(a(e)&&a(i)){let t=p.get(e)||[],r=p.get(i)||[];t.push({obj:u,key:o}),r.push({obj:l,key:o}),p.set(e,t),p.set(i,r)}f[o]=t(f[o],i,c,p)}}}}else f=l}return f}}(u,t.shift(),0,l);return u}}),e9=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.callWithTimeout=t.TimeoutError=void 0;var e=class t extends Error{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}};t.TimeoutError=e,t.callWithTimeout=function(t,r){let n;return Promise.race([t,new Promise(function(t,o){n=setTimeout(function(){o(new e("Operation timed out."))},r)})]).then(t=>(clearTimeout(n),t),t=>{throw clearTimeout(n),t})}}),e7=eE(t=>{function e(t,e){return"string"==typeof e?t===e:!!t.match(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isUrlIgnored=t.urlMatches=void 0,t.urlMatches=e,t.isUrlIgnored=function(t,r){if(!r)return!1;for(let n of r)if(e(t,n))return!0;return!1}}),rt=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isWrapped=void 0,t.isWrapped=function(t){return"function"==typeof t&&"function"==typeof t.__original&&"function"==typeof t.__unwrap&&!0===t.__wrapped}}),re=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Deferred=void 0;var e=class{constructor(){this._promise=new Promise((t,e)=>{this._resolve=t,this._reject=e})}get promise(){return this._promise}resolve(t){this._resolve(t)}reject(t){this._reject(t)}};t.Deferred=e}),rr=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BindOnceFuture=void 0;var e=re(),r=class{constructor(t,r){this._callback=t,this._that=r,this._isCalled=!1,this._deferred=new e.Deferred}get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...t){if(!this._isCalled){this._isCalled=!0;try{Promise.resolve(this._callback.call(this._that,...t)).then(t=>this._deferred.resolve(t),t=>this._deferred.reject(t))}catch(t){this._deferred.reject(t)}}return this._deferred.promise}};t.BindOnceFuture=r}),rn=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t._export=void 0;var e=(eS(),em(ev)),r=eA();t._export=function(t,n){return new Promise(o=>{e.context.with((0,r.suppressTracing)(e.context.active()),()=>{t.export(n,t=>{o(t)})})})}}),ro=eE(t=>{var e=t&&t.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=t&&t.__exportStar||function(t,r){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||e(r,t,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.internal=t.baggageUtils=void 0,r(eR(),t),r(eL(),t),r(eP(),t),r(eN(),t),r(eC(),t),r(eY(),t),r(ez(),t),r(e$(),t),t.baggageUtils=eO(),r(eW(),t),r(eq(),t),r(eJ(),t),r(e0(),t),r(e1(),t),r(e2(),t),r(e3(),t),r(e4(),t),r(e6(),t),r(eA(),t),r(eZ(),t),r(eM(),t),r(e5(),t),r(eI(),t),r(e9(),t),r(e7(),t),r(rt(),t),r(rr(),t),r(eG(),t);var n=rn();t.internal={_export:n._export}}),ri=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.disableInstrumentations=t.enableInstrumentations=t.parseInstrumentationOptions=void 0,t.parseInstrumentationOptions=function t(e=[]){let r=[];for(let n=0,o=e.length;n<o;n++){let o=e[n];if(Array.isArray(o)){let e=t(o);r=r.concat(e.instrumentations)}else"function"==typeof o?r.push(new o):o.instrumentationName&&r.push(o)}return{instrumentations:r}},t.enableInstrumentations=function(t,e,r){for(let n=0,o=t.length;n<o;n++){let o=t[n];e&&o.setTracerProvider(e),r&&o.setMeterProvider(r),o.getConfig().enabled||o.enable()}},t.disableInstrumentations=function(t){t.forEach(t=>t.disable())}}),ra=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.registerInstrumentations=void 0;var e=(eS(),em(ev)),r=ri();t.registerInstrumentations=function(t){let{instrumentations:n}=(0,r.parseInstrumentationOptions)(t.instrumentations),o=t.tracerProvider||e.trace.getTracerProvider(),i=t.meterProvider||e.metrics.getMeterProvider();return(0,r.enableInstrumentations)(n,o,i),()=>{(0,r.disableInstrumentations)(n)}}}),rs={},ru=ed(()=>{eT(rs,t7)}),rl={},rc=ed(()=>{eT(rl,ee)}),rp=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractAsyncHooksContextManager=void 0;var e=(rc(),em(rl)),r=["addListener","on","once","prependListener","prependOnceListener"],n=class{constructor(){this._kOtListeners=Symbol("OtListeners"),this._wrapped=!1}bind(t,r){return r instanceof e.EventEmitter?this._bindEventEmitter(t,r):"function"==typeof r?this._bindFunction(t,r):r}_bindFunction(t,e){let r=this,n=function(...n){return r.with(t,()=>e.apply(this,n))};return Object.defineProperty(n,"length",{enumerable:!1,configurable:!0,writable:!1,value:e.length}),n}_bindEventEmitter(t,e){return void 0!==this._getPatchMap(e)||(this._createPatchMap(e),r.forEach(r=>{void 0!==e[r]&&(e[r]=this._patchAddListener(e,e[r],t))}),"function"==typeof e.removeListener&&(e.removeListener=this._patchRemoveListener(e,e.removeListener)),"function"==typeof e.off&&(e.off=this._patchRemoveListener(e,e.off)),"function"==typeof e.removeAllListeners&&(e.removeAllListeners=this._patchRemoveAllListeners(e,e.removeAllListeners))),e}_patchRemoveListener(t,e){let r=this;return function(n,o){var i;let a=null===(i=r._getPatchMap(t))||void 0===i?void 0:i[n];if(void 0===a)return e.call(this,n,o);let s=a.get(o);return e.call(this,n,s||o)}}_patchRemoveAllListeners(t,e){let r=this;return function(n){let o=r._getPatchMap(t);return void 0!==o&&(0==arguments.length?r._createPatchMap(t):void 0!==o[n]&&delete o[n]),e.apply(this,arguments)}}_patchAddListener(t,e,r){let n=this;return function(o,i){if(n._wrapped)return e.call(this,o,i);let a=n._getPatchMap(t);void 0===a&&(a=n._createPatchMap(t));let s=a[o];void 0===s&&(s=new WeakMap,a[o]=s);let u=n.bind(r,i);s.set(i,u),n._wrapped=!0;try{return e.call(this,o,u)}finally{n._wrapped=!1}}}_createPatchMap(t){let e=Object.create(null);return t[this._kOtListeners]=e,e}_getPatchMap(t){return t[this._kOtListeners]}};t.AbstractAsyncHooksContextManager=n}),rf=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncLocalStorageContextManager=void 0;var e=(eS(),em(ev)),r=(ru(),em(rs)),n=rp(),o=class extends n.AbstractAsyncHooksContextManager{constructor(){super(),this._asyncLocalStorage=new r.AsyncLocalStorage}active(){var t;return null!==(t=this._asyncLocalStorage.getStore())&&void 0!==t?t:e.ROOT_CONTEXT}with(t,e,r,...n){let o=null==r?e:e.bind(r);return this._asyncLocalStorage.run(t,o,...n)}enable(){return this}disable(){return this._asyncLocalStorage.disable(),this}};t.AsyncLocalStorageContextManager=o}),r_=eE(t=>{function e(t,e){return{key:t,value:r(e)}}function r(t){let n=typeof t;return"string"===n?{stringValue:t}:"number"===n?Number.isInteger(t)?{intValue:t}:{doubleValue:t}:"boolean"===n?{boolValue:t}:t instanceof Uint8Array?{bytesValue:t}:Array.isArray(t)?{arrayValue:{values:t.map(r)}}:"object"===n&&null!=t?{kvlistValue:{values:Object.entries(t).map(([t,r])=>e(t,r))}}:{}}Object.defineProperty(t,"__esModule",{value:!0}),t.toAnyValue=t.toKeyValue=t.toAttributes=void 0,t.toAttributes=function(t){return Object.keys(t).map(r=>e(r,t[r]))},t.toKeyValue=e,t.toAnyValue=r}),rh=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toOtlpSpanEvent=t.toOtlpLink=t.sdkSpanToOtlpSpan=void 0;var e=r_();function r(t,r){var n;return{attributes:t.attributes?(0,e.toAttributes)(t.attributes):[],spanId:r.encodeSpanContext(t.context.spanId),traceId:r.encodeSpanContext(t.context.traceId),traceState:null===(n=t.context.traceState)||void 0===n?void 0:n.serialize(),droppedAttributesCount:t.droppedAttributesCount||0}}function n(t,r){return{attributes:t.attributes?(0,e.toAttributes)(t.attributes):[],name:t.name,timeUnixNano:r.encodeHrTime(t.time),droppedAttributesCount:t.droppedAttributesCount||0}}t.sdkSpanToOtlpSpan=function(t,o){var i;let a=t.spanContext(),s=t.status;return{traceId:o.encodeSpanContext(a.traceId),spanId:o.encodeSpanContext(a.spanId),parentSpanId:o.encodeOptionalSpanContext(t.parentSpanId),traceState:null===(i=a.traceState)||void 0===i?void 0:i.serialize(),name:t.name,kind:null==t.kind?0:t.kind+1,startTimeUnixNano:o.encodeHrTime(t.startTime),endTimeUnixNano:o.encodeHrTime(t.endTime),attributes:(0,e.toAttributes)(t.attributes),droppedAttributesCount:t.droppedAttributesCount,events:t.events.map(t=>n(t,o)),droppedEventsCount:t.droppedEventsCount,status:{code:s.code,message:s.message},links:t.links.map(t=>r(t,o)),droppedLinksCount:t.droppedLinksCount}},t.toOtlpLink=r,t.toOtlpSpanEvent=n}),rd=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getOtlpEncoder=t.encodeAsString=t.encodeAsLongBits=t.toLongBits=t.hrTimeToNanos=void 0;var e=ro(),r=BigInt(1e9);function n(t){return BigInt(t[0])*r+BigInt(t[1])}function o(t){return{low:Number(BigInt.asUintN(32,t)),high:Number(BigInt.asUintN(32,t>>BigInt(32)))}}function i(t){return o(n(t))}function a(t){return n(t).toString()}t.hrTimeToNanos=n,t.toLongBits=o,t.encodeAsLongBits=i,t.encodeAsString=a;var s="u">typeof BigInt?a:e.hrTimeToNanoseconds;function u(t){return t}function l(t){if(void 0!==t)return(0,e.hexToBase64)(t)}var c={encodeHrTime:i,encodeSpanContext:e.hexToBase64,encodeOptionalSpanContext:l};t.getOtlpEncoder=function(t){var r,n;if(void 0===t)return c;let o=null===(r=t.useLongBits)||void 0===r||r,a=null!==(n=t.useHex)&&void 0!==n&&n;return{encodeHrTime:o?i:s,encodeSpanContext:a?u:e.hexToBase64,encodeOptionalSpanContext:a?u:l}}}),rE=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createExportTraceServiceRequest=void 0;var e=r_(),r=rh(),n=rd();t.createExportTraceServiceRequest=function(t,o){return{resourceSpans:function(t,n){let o=function(t){let e=new Map;for(let r of t){let t=e.get(r.resource);t||(t=new Map,e.set(r.resource,t));let n=`${r.instrumentationLibrary.name}@${r.instrumentationLibrary.version||""}:${r.instrumentationLibrary.schemaUrl||""}`,o=t.get(n);o||(o=[],t.set(n,o)),o.push(r)}return e}(t),i=[],a=o.entries(),s=a.next();for(;!s.done;){let[t,o]=s.value,u=[],l=o.values(),c=l.next();for(;!c.done;){let t=c.value;if(t.length>0){let{name:e,version:o,schemaUrl:i}=t[0].instrumentationLibrary,a=t.map(t=>(0,r.sdkSpanToOtlpSpan)(t,n));u.push({scope:{name:e,version:o},spans:a,schemaUrl:i})}c=l.next()}let p={resource:{attributes:(0,e.toAttributes)(t.attributes),droppedAttributesCount:0},scopeSpans:u,schemaUrl:void 0};i.push(p),s=a.next()}return i}(t,(0,n.getOtlpEncoder)(o))}}}),rg=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseRetryAfterToMills=t.isExportRetryable=t.invalidTimeout=t.configureExporterTimeout=t.appendRootPathToUrlIfNeeded=t.appendResourcePathToUrl=t.parseHeaders=t.DEFAULT_EXPORT_BACKOFF_MULTIPLIER=t.DEFAULT_EXPORT_MAX_BACKOFF=t.DEFAULT_EXPORT_INITIAL_BACKOFF=t.DEFAULT_EXPORT_MAX_ATTEMPTS=void 0;var e=(eS(),em(ev)),r=ro();function n(t,r){return e.diag.warn("Timeout must be greater than 0",t),r}t.DEFAULT_EXPORT_MAX_ATTEMPTS=5,t.DEFAULT_EXPORT_INITIAL_BACKOFF=1e3,t.DEFAULT_EXPORT_MAX_BACKOFF=5e3,t.DEFAULT_EXPORT_BACKOFF_MULTIPLIER=1.5,t.parseHeaders=function(t={}){let r={};return Object.entries(t).forEach(([t,n])=>{"u">typeof n?r[t]=String(n):e.diag.warn(`Header "${t}" has wrong value and will be ignored`)}),r},t.appendResourcePathToUrl=function(t,e){return t.endsWith("/")||(t+="/"),t+e},t.appendRootPathToUrlIfNeeded=function(t){try{let e=new URL(t);return""===e.pathname&&(e.pathname=e.pathname+"/"),e.toString()}catch{return e.diag.warn(`Could not parse export URL: '${t}'`),t}},t.configureExporterTimeout=function(t){var e;let o;return"number"==typeof t?t<=0?n(t,1e4):t:(o=Number(null!==(e=(0,r.getEnv)().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)&&void 0!==e?e:(0,r.getEnv)().OTEL_EXPORTER_OTLP_TIMEOUT))<=0?n(o,1e4):o},t.invalidTimeout=n,t.isExportRetryable=function(t){return[429,502,503,504].includes(t)},t.parseRetryAfterToMills=function(t){if(null==t)return -1;let e=Number.parseInt(t,10);if(Number.isInteger(e))return e>0?1e3*e:-1;let r=new Date(t).getTime()-Date.now();return r>=0?r:0}}),rT=eE(t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OTLPExporterBase=void 0;var e=(eS(),em(ev)),r=ro(),n=rg(),o=class{constructor(t={}){this._sendingPromises=[],this.url=this.getDefaultUrl(t),"string"==typeof t.hostname&&(this.hostname=t.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new r.BindOnceFuture(this._shutdown,this),this._concurrencyLimit="number"==typeof t.concurrencyLimit?t.concurrencyLimit:30,this.timeoutMillis=(0,n.configureExporterTimeout)(t.timeoutMillis),this.onInit(t)}export(t,e){if(this._shutdownOnce.isCalled){e({code:r.ExportResultCode.FAILED,error:Error("Exporter has been shutdown")});return}if(this._sendingPromises.length>=this._concurrencyLimit){e({code:r.ExportResultCode.FAILED,error:Error("Concurrent export limit reached")});return}this._export(t).then(()=>{e({code:r.ExportResultCode.SUCCESS})}).catch(t=>{e({code:r.ExportResultCode.FAILED,error:t})})}_export(t){return new Promise((r,n)=>{try{e.diag.debug("items to be sent",t),this.send(t,r,n)}catch(t){n(t)}})}shutdown(){return this._shutdownOnce.call()}forceFlush(){return Promise.all(this._sendingPromises).then(()=>{})}_shutdown(){return e.diag.debug("shutdown started"),this.onShutdown(),this.forceFlush()}};t.OTLPExporterBase=o}),ry=eE((t,e)=>{e.exports=function(t,e){for(var r=Array(arguments.length-1),n=0,o=2,i=!0;o<arguments.length;)r[n++]=arguments[o++];return new Promise(function(o,a){r[n]=function(t){if(i){if(i=!1,t)a(t);else{for(var e=Array(arguments.length-1),r=0;r<e.length;)e[r++]=arguments[r];o.apply(null,e)}}};try{t.apply(e||null,r)}catch(t){i&&(i=!1,a(t))}})}}),rm=eE(t=>{t.length=function(t){var e=t.length;if(!e)return 0;for(var r=0;--e%4>1&&"="===t.charAt(e);)++r;return Math.ceil(3*t.length)/4-r};var e,r=Array(64),n=Array(123);for(e=0;e<64;)n[r[e]=e<26?e+65:e<52?e+71:e<62?e-4:e-59|43]=e++;t.encode=function(t,e,n){for(var o,i=null,a=[],s=0,u=0;e<n;){var l=t[e++];switch(u){case 0:a[s++]=r[l>>2],o=(3&l)<<4,u=1;break;case 1:a[s++]=r[o|l>>4],o=(15&l)<<2,u=2;break;case 2:a[s++]=r[o|l>>6],a[s++]=r[63&l],u=0}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),s=0)}return u&&(a[s++]=r[o],a[s++]=61,1===u&&(a[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,a.slice(0,s))),i.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var o="invalid encoding";t.decode=function(t,e,r){for(var i,a=r,s=0,u=0;u<t.length;){var l=t.charCodeAt(u++);if(61===l&&s>1)break;if(void 0===(l=n[l]))throw Error(o);switch(s){case 0:i=l,s=1;break;case 1:e[r++]=i<<2|(48&l)>>4,i=l,s=2;break;case 2:e[r++]=(15&i)<<4|(60&l)>>2,i=l,s=3;break;case 3:e[r++]=(3&i)<<6|l,s=0}}if(1===s)throw Error(o);return r-a},t.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}}),rv=eE((t,e)=>{function r(){this._listeners={}}e.exports=r,r.prototype.on=function(t,e,r){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:r||this}),this},r.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var r=this._listeners[t],n=0;n<r.length;)r[n].fn===e?r.splice(n,1):++n;return this},r.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<e.length;)e[n].fn.apply(e[n++].ctx,r)}return this}}),rS=eE((t,e)=>{function r(t){return"u">typeof Float32Array?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=128===r[3];function o(t,n,o){e[0]=t,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3]}function i(t,n,o){e[0]=t,n[o]=r[3],n[o+1]=r[2],n[o+2]=r[1],n[o+3]=r[0]}function a(t,n){return r[0]=t[n],r[1]=t[n+1],r[2]=t[n+2],r[3]=t[n+3],e[0]}function s(t,n){return r[3]=t[n],r[2]=t[n+1],r[1]=t[n+2],r[0]=t[n+3],e[0]}t.writeFloatLE=n?o:i,t.writeFloatBE=n?i:o,t.readFloatLE=n?a:s,t.readFloatBE=n?s:a}():function(){function e(t,e,r,n){var o=e<0?1:0;if(o&&(e=-e),0===e)t(1/e>0?0:2147483648,r,n);else if(isNaN(e))t(2143289344,r,n);else if(e>34028234663852886e22)t((o<<31|2139095040)>>>0,r,n);else if(e<11754943508222875e-54)t((o<<31|Math.round(e/1401298464324817e-60))>>>0,r,n);else{var i=Math.floor(Math.log(e)/Math.LN2),a=8388607&Math.round(e*Math.pow(2,-i)*8388608);t((o<<31|i+127<<23|a)>>>0,r,n)}}function r(t,e,r){var n=t(e,r),o=(n>>31)*2+1,i=n>>>23&255,a=8388607&n;return 255===i?a?NaN:1/0*o:0===i?1401298464324817e-60*o*a:o*Math.pow(2,i-150)*(a+8388608)}t.writeFloatLE=e.bind(null,n),t.writeFloatBE=e.bind(null,o),t.readFloatLE=r.bind(null,i),t.readFloatBE=r.bind(null,a)}(),"u">typeof Float64Array?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=128===r[7];function o(t,n,o){e[0]=t,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3],n[o+4]=r[4],n[o+5]=r[5],n[o+6]=r[6],n[o+7]=r[7]}function i(t,n,o){e[0]=t,n[o]=r[7],n[o+1]=r[6],n[o+2]=r[5],n[o+3]=r[4],n[o+4]=r[3],n[o+5]=r[2],n[o+6]=r[1],n[o+7]=r[0]}function a(t,n){return r[0]=t[n],r[1]=t[n+1],r[2]=t[n+2],r[3]=t[n+3],r[4]=t[n+4],r[5]=t[n+5],r[6]=t[n+6],r[7]=t[n+7],e[0]}function s(t,n){return r[7]=t[n],r[6]=t[n+1],r[5]=t[n+2],r[4]=t[n+3],r[3]=t[n+4],r[2]=t[n+5],r[1]=t[n+6],r[0]=t[n+7],e[0]}t.writeDoubleLE=n?o:i,t.writeDoubleBE=n?i:o,t.readDoubleLE=n?a:s,t.readDoubleBE=n?s:a}():function(){function e(t,e,r,n,o,i){var a,s=n<0?1:0;if(s&&(n=-n),0===n)t(0,o,i+e),t(1/n>0?0:2147483648,o,i+r);else if(isNaN(n))t(0,o,i+e),t(2146959360,o,i+r);else if(n>17976931348623157e292)t(0,o,i+e),t((s<<31|2146435072)>>>0,o,i+r);else if(n<22250738585072014e-324)t((a=n/5e-324)>>>0,o,i+e),t((s<<31|a/4294967296)>>>0,o,i+r);else{var u=Math.floor(Math.log(n)/Math.LN2);1024===u&&(u=1023),t(4503599627370496*(a=n*Math.pow(2,-u))>>>0,o,i+e),t((s<<31|u+1023<<20|1048576*a&1048575)>>>0,o,i+r)}}function r(t,e,r,n,o){var i=t(n,o+e),a=t(n,o+r),s=(a>>31)*2+1,u=a>>>20&2047,l=4294967296*(1048575&a)+i;return 2047===u?l?NaN:1/0*s:0===u?5e-324*s*l:s*Math.pow(2,u-1075)*(l+4503599627370496)}t.writeDoubleLE=e.bind(null,n,0,4),t.writeDoubleBE=e.bind(null,o,4,0),t.readDoubleLE=r.bind(null,i,0,4),t.readDoubleBE=r.bind(null,a,4,0)}(),t}function n(t,e,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function o(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=255&t}function i(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function a(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}e.exports=r(r)}),rA=eE((t,e)=>{e.exports=function(t){return null}}),rb=eE(t=>{t.length=function(t){for(var e=0,r=0,n=0;n<t.length;++n)(r=t.charCodeAt(n))<128?e+=1:r<2048?e+=2:(64512&r)==55296&&(64512&t.charCodeAt(n+1))==56320?(++n,e+=4):e+=3;return e},t.read=function(t,e,r){if(r-e<1)return"";for(var n,o=null,i=[],a=0;e<r;)(n=t[e++])<128?i[a++]=n:n>191&&n<224?i[a++]=(31&n)<<6|63&t[e++]:n>239&&n<365?(n=((7&n)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,i[a++]=55296+(n>>10),i[a++]=56320+(1023&n)):i[a++]=(15&n)<<12|(63&t[e++])<<6|63&t[e++],a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,i.slice(0,a))),o.join("")):String.fromCharCode.apply(String,i.slice(0,a))},t.write=function(t,e,r){for(var n,o,i=r,a=0;a<t.length;++a)(n=t.charCodeAt(a))<128?e[r++]=n:(n<2048?e[r++]=n>>6|192:((64512&n)==55296&&(64512&(o=t.charCodeAt(a+1)))==56320?(n=65536+((1023&n)<<10)+(1023&o),++a,e[r++]=n>>18|240,e[r++]=n>>12&63|128):e[r++]=n>>12|224,e[r++]=n>>6&63|128),e[r++]=63&n|128);return r-i}}),rO=eE((t,e)=>{e.exports=function(t,e,r){var n=r||8192,o=n>>>1,i=null,a=n;return function(r){if(r<1||r>o)return t(r);a+r>n&&(i=t(n),a=0);var s=e.call(i,a,a+=r);return 7&a&&(a=(7|a)+1),s}}}),rR=eE((t,e)=>{e.exports=n;var r=rL();function n(t,e){this.lo=t>>>0,this.hi=e>>>0}var o=n.zero=new n(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var i=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(t){if(0===t)return o;var e=t<0;e&&(t=-t);var r=t>>>0,i=(t-r)/4294967296>>>0;return e&&(i=~i>>>0,r=~r>>>0,++r>4294967295&&(r=0,++i>4294967295&&(i=0))),new n(r,i)},n.from=function(t){if("number"==typeof t)return n.fromNumber(t);if(r.isString(t)){if(!r.Long)return n.fromNumber(parseInt(t,10));t=r.Long.fromString(t)}return t.low||t.high?new n(t.low>>>0,t.high>>>0):o},n.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=~this.lo+1>>>0,r=~this.hi>>>0;return e||(r=r+1>>>0),-(e+4294967296*r)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(t){return r.Long?new r.Long(0|this.lo,0|this.hi,!!t):{low:0|this.lo,high:0|this.hi,unsigned:!!t}};var a=String.prototype.charCodeAt;n.fromHash=function(t){return t===i?o:new n((a.call(t,0)|a.call(t,1)<<8|a.call(t,2)<<16|a.call(t,3)<<24)>>>0,(a.call(t,4)|a.call(t,5)<<8|a.call(t,6)<<16|a.call(t,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},n.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},n.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:r<128?9:10}}),rL=eE(t=>{function e(t,e,r){for(var n=Object.keys(e),o=0;o<n.length;++o)void 0!==t[n[o]]&&r||(t[n[o]]=e[n[o]]);return t}function r(t){function r(t,n){if(!(this instanceof r))return new r(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,r):Object.defineProperty(this,"stack",{value:Error().stack||""}),n&&e(this,n)}return r.prototype=Object.create(Error.prototype,{constructor:{value:r,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),r}t.asPromise=ry(),t.base64=rm(),t.EventEmitter=rv(),t.float=rS(),t.inquire=rA(),t.utf8=rb(),t.pool=rO(),t.LongBits=rR(),t.isNode=!!("u">typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),t.global=t.isNode&&global||"u">typeof window&&window||"u">typeof self&&self||t,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},t.isString=function(t){return"string"==typeof t||t instanceof String},t.isObject=function(t){return t&&"object"==typeof t},t.isset=t.isSet=function(t,e){var r=t[e];return!!(null!=r&&t.hasOwnProperty(e))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},t.Buffer=function(){try{var e=t.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch{return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(e){return"number"==typeof e?t.Buffer?t._Buffer_allocUnsafe(e):new t.Array(e):t.Buffer?t._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)},t.Array="u">typeof Uint8Array?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(e){return e?t.LongBits.from(e).toHash():t.LongBits.zeroHash},t.longFromHash=function(e,r){var n=t.LongBits.fromHash(e);return t.Long?t.Long.fromBits(n.lo,n.hi,r):n.toNumber(!!r)},t.merge=e,t.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},t.newError=r,t.ProtocolError=r("ProtocolError"),t.oneOfGetter=function(t){for(var e={},r=0;r<t.length;++r)e[t[r]]=1;return function(){for(var t=Object.keys(this),r=t.length-1;r>-1;--r)if(1===e[t[r]]&&void 0!==this[t[r]]&&null!==this[t[r]])return t[r]}},t.oneOfSetter=function(t){return function(e){for(var r=0;r<t.length;++r)t[r]!==e&&delete this[t[r]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var e=t.Buffer;if(!e){t._Buffer_from=t._Buffer_allocUnsafe=null;return}t._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},t._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}}}),rP=eE((t,e)=>{e.exports=c;var r,n=rL(),o=n.LongBits,i=n.base64,a=n.utf8;function s(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function u(){}function l(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function c(){this.len=0,this.head=new s(u,0,0),this.tail=this.head,this.states=null}var p=function(){return n.Buffer?function(){return(c.create=function(){return new r})()}:function(){return new c}};function f(t,e,r){e[r]=255&t}function _(t,e){this.len=t,this.next=void 0,this.val=e}function h(t,e,r){for(;t.hi;)e[r++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=127&t.lo|128,t.lo=t.lo>>>7;e[r++]=t.lo}function d(t,e,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}c.create=p(),c.alloc=function(t){return new n.Array(t)},n.Array!==Array&&(c.alloc=n.pool(c.alloc,n.Array.prototype.subarray)),c.prototype._push=function(t,e,r){return this.tail=this.tail.next=new s(t,e,r),this.len+=e,this},_.prototype=Object.create(s.prototype),_.prototype.fn=function(t,e,r){for(;t>127;)e[r++]=127&t|128,t>>>=7;e[r]=t},c.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new _((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},c.prototype.int32=function(t){return t<0?this._push(h,10,o.fromNumber(t)):this.uint32(t)},c.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},c.prototype.uint64=function(t){var e=o.from(t);return this._push(h,e.length(),e)},c.prototype.int64=c.prototype.uint64,c.prototype.sint64=function(t){var e=o.from(t).zzEncode();return this._push(h,e.length(),e)},c.prototype.bool=function(t){return this._push(f,1,t?1:0)},c.prototype.fixed32=function(t){return this._push(d,4,t>>>0)},c.prototype.sfixed32=c.prototype.fixed32,c.prototype.fixed64=function(t){var e=o.from(t);return this._push(d,4,e.lo)._push(d,4,e.hi)},c.prototype.sfixed64=c.prototype.fixed64,c.prototype.float=function(t){return this._push(n.float.writeFloatLE,4,t)},c.prototype.double=function(t){return this._push(n.float.writeDoubleLE,8,t)};var E=n.Array.prototype.set?function(t,e,r){e.set(t,r)}:function(t,e,r){for(var n=0;n<t.length;++n)e[r+n]=t[n]};c.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(f,1,0);if(n.isString(t)){var r=c.alloc(e=i.length(t));i.decode(t,r,0),t=r}return this.uint32(e)._push(E,e,t)},c.prototype.string=function(t){var e=a.length(t);return e?this.uint32(e)._push(a.write,e,t):this._push(f,1,0)},c.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new s(u,0,0),this.len=0,this},c.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new s(u,0,0),this.len=0),this},c.prototype.ldelim=function(){var t=this.head,e=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=t.next,this.tail=e,this.len+=r),this},c.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),r=0;t;)t.fn(t.val,e,r),r+=t.len,t=t.next;return e},c._configure=function(t){r=t,c.create=p(),r._configure()}}),rC=eE((t,e)=>{e.exports=o;var r=rP();(o.prototype=Object.create(r.prototype)).constructor=o;var n=rL();function o(){r.call(this)}function i(t,e,r){t.length<40?n.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}o._configure=function(){o.alloc=n._Buffer_allocUnsafe,o.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(t,e,r){e.set(t,r)}:function(t,e,r){if(t.copy)t.copy(e,r,0,t.length);else for(var n=0;n<t.length;)e[r++]=t[n++]}},o.prototype.bytes=function(t){n.isString(t)&&(t=n._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(o.writeBytesBuffer,e,t),this},o.prototype.string=function(t){var e=n.Buffer.byteLength(t);return this.uint32(e),e&&this._push(i,e,t),this},o._configure()}),rN=eE((t,e)=>{e.exports=s;var r,n=rL(),o=n.LongBits,i=n.utf8;function a(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function s(t){this.buf=t,this.pos=0,this.len=t.length}var u="u">typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new s(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new s(t);throw Error("illegal buffer")},l=function(){return n.Buffer?function(t){return(s.create=function(t){return n.Buffer.isBuffer(t)?new r(t):u(t)})(t)}:u};function c(){var t=new o(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw a(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw a(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function p(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new o(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}s.create=l(),s.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,s.prototype.uint32=function(){var t=4294967295;return function(){if(t=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(t=(t|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return t}}(),s.prototype.int32=function(){return 0|this.uint32()},s.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},s.prototype.bool=function(){return 0!==this.uint32()},s.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},s.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},s.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var t=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},s.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var t=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},s.prototype.bytes=function(){var t=this.uint32(),e=this.pos,r=this.pos+t;if(r>this.len)throw a(this,t);if(this.pos+=t,Array.isArray(this.buf))return this.buf.slice(e,r);if(e===r){var o=n.Buffer;return o?o.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,e,r)},s.prototype.string=function(){var t=this.bytes();return i.read(t,0,t.length)},s.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw a(this,t);this.pos+=t}else do if(this.pos>=this.len)throw a(this);while(128&this.buf[this.pos++]);return this},s.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},s._configure=function(t){r=t,s.create=l(),r._configure();var e=n.Long?"toLong":"toNumber";n.merge(s.prototype,{int64:function(){return c.call(this)[e](!1)},uint64:function(){return c.call(this)[e](!0)},sint64:function(){return c.call(this).zzDecode()[e](!1)},fixed64:function(){return f.call(this)[e](!0)},sfixed64:function(){return f.call(this)[e](!1)}})}}),rI=eE((t,e)=>{e.exports=o;var r=rN();(o.prototype=Object.create(r.prototype)).constructor=o;var n=rL();function o(t){r.call(this,t)}o._configure=function(){n.Buffer&&(o.prototype._slice=n.Buffer.prototype.slice)},o.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},o._configure()}),rw=eE((t,e)=>{e.exports=n;var r=rL();function n(t,e,n){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=!!e,this.responseDelimited=!!n}(n.prototype=Object.create(r.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function t(e,n,o,i,a){if(!i)throw TypeError("request must be specified");var s=this;if(!a)return r.asPromise(t,s,e,n,o,i);if(!s.rpcImpl){setTimeout(function(){a(Error("already ended"))},0);return}try{return s.rpcImpl(e,n[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(t,r){if(t)return s.emit("error",t,e),a(t);if(null===r){s.end(!0);return}if(!(r instanceof o))try{r=o[s.responseDelimited?"decodeDelimited":"decode"](r)}catch(t){return s.emit("error",t,e),a(t)}return s.emit("data",r,e),a(null,r)})}catch(t){s.emit("error",t,e),setTimeout(function(){a(t)},0);return}},n.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}}),rM=eE(t=>{t.Service=rw()}),rD=eE((t,e)=>{e.exports={}}),rU=eE(t=>{function e(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}t.build="minimal",t.Writer=rP(),t.BufferWriter=rC(),t.Reader=rN(),t.BufferReader=rI(),t.util=rL(),t.rpc=rM(),t.roots=rD(),t.configure=e,e()}),rx=eE((t,e)=>{e.exports=rU()});eS();var rB=ey(ro());eS();var rG=ey(ro()),rV=ey(eH()),rk=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rj=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},rF=function(){function t(t,e,r,n,o,i,a,s,u,l){void 0===a&&(a=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:ev.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=r,this._spanContext=n,this.parentSpanId=i,this.kind=o,this.links=a;var c=Date.now();this._performanceStartTime=rG.otperformance.now(),this._performanceOffset=c-(this._performanceStartTime+(0,rG.getTimeOrigin)()),this._startTimeProvided=null!=s,this.startTime=this._getTime(s??c),this.resource=t.resource,this.instrumentationLibrary=t.instrumentationLibrary,this._spanLimits=t.getSpanLimits(),null!=l&&this.setAttributes(l),this._spanProcessor=t.getActiveSpanProcessor(),this._spanProcessor.onStart(this,e),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(t,e){return null==e||this._isSpanEnded()||(0===t.length?ev.diag.warn("Invalid attribute key: "+t):(0,rG.isAttributeValue)(e)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?this._droppedAttributesCount++:this.attributes[t]=this._truncateToSize(e):ev.diag.warn("Invalid attribute value set for key: "+t)),this},t.prototype.setAttributes=function(t){var e,r;try{for(var n=rk(Object.entries(t)),o=n.next();!o.done;o=n.next()){var i=rj(o.value,2),a=i[0],s=i[1];this.setAttribute(a,s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return this},t.prototype.addEvent=function(t,e,r){if(this._isSpanEnded())return this;if(0===this._spanLimits.eventCountLimit)return ev.diag.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(ev.diag.warn("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),(0,rG.isTimeInput)(e)&&((0,rG.isTimeInput)(r)||(r=e),e=void 0);var n=(0,rG.sanitizeAttributes)(e);return this.events.push({name:t,attributes:n,time:this._getTime(r),droppedAttributesCount:0}),this},t.prototype.setStatus=function(t){return this._isSpanEnded()||(this.status=t),this},t.prototype.updateName=function(t){return this._isSpanEnded()||(this.name=t),this},t.prototype.end=function(t){if(this._isSpanEnded()){ev.diag.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once.");return}this._ended=!0,this.endTime=this._getTime(t),this._duration=(0,rG.hrTimeDuration)(this.startTime,this.endTime),this._duration[0]<0&&(ev.diag.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._spanProcessor.onEnd(this)},t.prototype._getTime=function(t){if("number"==typeof t&&t<rG.otperformance.now())return(0,rG.hrTime)(t+this._performanceOffset);if("number"==typeof t)return(0,rG.millisToHrTime)(t);if(t instanceof Date)return(0,rG.millisToHrTime)(t.getTime());if((0,rG.isTimeInputHrTime)(t))return t;if(this._startTimeProvided)return(0,rG.millisToHrTime)(Date.now());var e=rG.otperformance.now()-this._performanceStartTime;return(0,rG.addHrTimes)(this.startTime,(0,rG.millisToHrTime)(e))},t.prototype.isRecording=function(){return!1===this._ended},t.prototype.recordException=function(t,e){var r={};"string"==typeof t?r[rV.SemanticAttributes.EXCEPTION_MESSAGE]=t:t&&(t.code?r[rV.SemanticAttributes.EXCEPTION_TYPE]=t.code.toString():t.name&&(r[rV.SemanticAttributes.EXCEPTION_TYPE]=t.name),t.message&&(r[rV.SemanticAttributes.EXCEPTION_MESSAGE]=t.message),t.stack&&(r[rV.SemanticAttributes.EXCEPTION_STACKTRACE]=t.stack)),r[rV.SemanticAttributes.EXCEPTION_TYPE]||r[rV.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent("exception",r,e):ev.diag.warn("Failed to record an exception "+t)},Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),t.prototype._isSpanEnded=function(){return this._ended&&ev.diag.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},t.prototype._truncateToLimitUtil=function(t,e){return t.length<=e?t:t.substr(0,e)},t.prototype._truncateToSize=function(t){var e=this,r=this._attributeValueLengthLimit;return r<=0?(ev.diag.warn("Attribute value limit must be positive, got "+r),t):"string"==typeof t?this._truncateToLimitUtil(t,r):Array.isArray(t)?t.map(function(t){return"string"==typeof t?e._truncateToLimitUtil(t,r):t}):t},t}();eS();var rH=ey(ro());!function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(c||(c={}));var rX=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:c.NOT_RECORD}},t.prototype.toString=function(){return"AlwaysOffSampler"},t}(),rK=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:c.RECORD_AND_SAMPLED}},t.prototype.toString=function(){return"AlwaysOnSampler"},t}();eS();var rW=ey(ro()),rY=function(){function t(t){var e,r,n,o;this._root=t.root,this._root||((0,rW.globalErrorHandler)(Error("ParentBasedSampler must have a root sampler configured")),this._root=new rK),this._remoteParentSampled=null!==(e=t.remoteParentSampled)&&void 0!==e?e:new rK,this._remoteParentNotSampled=null!==(r=t.remoteParentNotSampled)&&void 0!==r?r:new rX,this._localParentSampled=null!==(n=t.localParentSampled)&&void 0!==n?n:new rK,this._localParentNotSampled=null!==(o=t.localParentNotSampled)&&void 0!==o?o:new rX}return t.prototype.shouldSample=function(t,e,r,n,o,i){var a=ev.trace.getSpanContext(t);return a&&(0,ev.isSpanContextValid)(a)?a.isRemote?a.traceFlags&ev.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(t,e,r,n,o,i):this._remoteParentNotSampled.shouldSample(t,e,r,n,o,i):a.traceFlags&ev.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(t,e,r,n,o,i):this._localParentNotSampled.shouldSample(t,e,r,n,o,i):this._root.shouldSample(t,e,r,n,o,i)},t.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},t}();eS();var rz=function(){function t(t){void 0===t&&(t=0),this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(4294967295*this._ratio)}return t.prototype.shouldSample=function(t,e){return{decision:(0,ev.isValidTraceId)(e)&&this._accumulate(e)<this._upperBound?c.RECORD_AND_SAMPLED:c.NOT_RECORD}},t.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},t.prototype._normalize=function(t){return"number"!=typeof t||isNaN(t)?0:t>=1?1:t<=0?0:t},t.prototype._accumulate=function(t){for(var e=0,r=0;r<t.length/8;r++){var n=8*r;e=(e^parseInt(t.slice(n,n+8),16))>>>0}return e},t}(),r$=(0,rH.getEnv)(),rq=rH.TracesSamplerValues.AlwaysOn;function rQ(){return{sampler:rZ(r$),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:(0,rH.getEnv)().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,rH.getEnv)().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:(0,rH.getEnv)().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,rH.getEnv)().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:(0,rH.getEnv)().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:(0,rH.getEnv)().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:(0,rH.getEnv)().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:(0,rH.getEnv)().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function rZ(t){switch(void 0===t&&(t=(0,rH.getEnv)()),t.OTEL_TRACES_SAMPLER){case rH.TracesSamplerValues.AlwaysOn:return new rK;case rH.TracesSamplerValues.AlwaysOff:return new rX;case rH.TracesSamplerValues.ParentBasedAlwaysOn:return new rY({root:new rK});case rH.TracesSamplerValues.ParentBasedAlwaysOff:return new rY({root:new rX});case rH.TracesSamplerValues.TraceIdRatio:return new rz(rJ(t));case rH.TracesSamplerValues.ParentBasedTraceIdRatio:return new rY({root:new rz(rJ(t))});default:return ev.diag.error('OTEL_TRACES_SAMPLER value "'+t.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+rq+'".'),new rK}}function rJ(t){if(void 0===t.OTEL_TRACES_SAMPLER_ARG||""===t.OTEL_TRACES_SAMPLER_ARG)return ev.diag.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to 1."),1;var e=Number(t.OTEL_TRACES_SAMPLER_ARG);return isNaN(e)?(ev.diag.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to 1."),1):e<0||e>1?(ev.diag.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to 1."),1):e}var r0=ey(ro());eS();var r1=ey(ro()),r2=function(){function t(t,e){this._exporter=t,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;var r=(0,r1.getEnv)();this._maxExportBatchSize="number"==typeof e?.maxExportBatchSize?e.maxExportBatchSize:r.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize="number"==typeof e?.maxQueueSize?e.maxQueueSize:r.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis="number"==typeof e?.scheduledDelayMillis?e.scheduledDelayMillis:r.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis="number"==typeof e?.exportTimeoutMillis?e.exportTimeoutMillis:r.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new r1.BindOnceFuture(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(ev.diag.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return t.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},t.prototype.onStart=function(t,e){},t.prototype.onEnd=function(t){this._shutdownOnce.isCalled||t.spanContext().traceFlags&ev.TraceFlags.SAMPLED&&this._addToBuffer(t)},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){var t=this;return Promise.resolve().then(function(){return t.onShutdown()}).then(function(){return t._flushAll()}).then(function(){return t._exporter.shutdown()})},t.prototype._addToBuffer=function(t){if(this._finishedSpans.length>=this._maxQueueSize){0===this._droppedSpansCount&&ev.diag.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(ev.diag.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(t),this._maybeStartTimer()},t.prototype._flushAll=function(){var t=this;return new Promise(function(e,r){for(var n=[],o=Math.ceil(t._finishedSpans.length/t._maxExportBatchSize),i=0;i<o;i++)n.push(t._flushOneBatch());Promise.all(n).then(function(){e()}).catch(r)})},t.prototype._flushOneBatch=function(){var t=this;return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise(function(e,r){var n=setTimeout(function(){r(Error("Timeout"))},t._exportTimeoutMillis);ev.context.with((0,r1.suppressTracing)(ev.context.active()),function(){var o=t._finishedSpans.splice(0,t._maxExportBatchSize),i=function(){return t._exporter.export(o,function(t){var o;clearTimeout(n),t.code===r1.ExportResultCode.SUCCESS?e():r(null!==(o=t.error)&&void 0!==o?o:Error("BatchSpanProcessor: span export failed"))})},a=o.map(function(t){return t.resource}).filter(function(t){return t.asyncAttributesPending});0===a.length?i():Promise.all(a.map(function(t){var e;return null===(e=t.waitForAsyncAttributes)||void 0===e?void 0:e.call(t)})).then(i,function(t){(0,r1.globalErrorHandler)(t),r(t)})})})},t.prototype._maybeStartTimer=function(){var t=this;if(!this._isExporting){var e=function(){t._isExporting=!0,t._flushOneBatch().then(function(){t._isExporting=!1,t._finishedSpans.length>0&&(t._clearTimer(),t._maybeStartTimer())}).catch(function(e){t._isExporting=!1,(0,r1.globalErrorHandler)(e)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return e();void 0===this._timer&&(this._timer=setTimeout(function(){return e()},this._scheduledDelayMillis),(0,r1.unrefTimer)(this._timer))}},t.prototype._clearTimer=function(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)},t}(),r3=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),r4=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.onInit(r),n}return r3(e,t),e.prototype.onInit=function(t){var e=this;t?.disableAutoFlushOnDocumentHide!==!0&&"u">typeof document&&(this._visibilityChangeListener=function(){"hidden"===document.visibilityState&&e.forceFlush()},this._pageHideListener=function(){e.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},e.prototype.onShutdown=function(){"u">typeof document&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},e}(r2),r6=function(){this.generateTraceId=r5(16),this.generateSpanId=r5(8)},r8=Array(32);function r5(t){return function(){for(var e=0;e<2*t;e++)r8[e]=Math.floor(16*Math.random())+48,r8[e]>=58&&(r8[e]+=39);return String.fromCharCode.apply(null,r8.slice(0,2*t))}}var r9=function(){function t(t,e,r){this._tracerProvider=r;var n,o,i,a=(n={sampler:rZ()},(i=Object.assign({},o=rQ(),n,e)).generalLimits=Object.assign({},o.generalLimits,e.generalLimits||{}),i.spanLimits=Object.assign({},o.spanLimits,e.spanLimits||{}),i);this._sampler=a.sampler,this._generalLimits=a.generalLimits,this._spanLimits=a.spanLimits,this._idGenerator=e.idGenerator||new r6,this.resource=r.resource,this.instrumentationLibrary=t}return t.prototype.startSpan=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=ev.context.active()),e.root&&(r=ev.trace.deleteSpan(r));var n=ev.trace.getSpan(r);if((0,rB.isTracingSuppressed)(r)){ev.diag.debug("Instrumentation suppressed, returning Noop Span");var o=ev.trace.wrapSpanContext(ev.INVALID_SPAN_CONTEXT);return o}var i,a,s,u,l,c,p=n?.spanContext(),f=this._idGenerator.generateSpanId();p&&ev.trace.isSpanContextValid(p)?(u=p.traceId,l=p.traceState,c=p.spanId):u=this._idGenerator.generateTraceId();var _=null!==(i=e.kind)&&void 0!==i?i:ev.SpanKind.INTERNAL,h=(null!==(a=e.links)&&void 0!==a?a:[]).map(function(t){return{context:t.context,attributes:(0,rB.sanitizeAttributes)(t.attributes)}}),d=(0,rB.sanitizeAttributes)(e.attributes),E=this._sampler.shouldSample(r,u,t,_,d,h);l=null!==(s=E.traceState)&&void 0!==s?s:l;var g={traceId:u,spanId:f,traceFlags:E.decision===ev.SamplingDecision.RECORD_AND_SAMPLED?ev.TraceFlags.SAMPLED:ev.TraceFlags.NONE,traceState:l};if(E.decision===ev.SamplingDecision.NOT_RECORD){ev.diag.debug("Recording is off, propagating context in a non-recording span");var o=ev.trace.wrapSpanContext(g);return o}var T=(0,rB.sanitizeAttributes)(Object.assign(d,E.attributes));return new rF(this,r,t,g,_,c,h,e.startTime,void 0,T)},t.prototype.startActiveSpan=function(t,e,r,n){var o,i,a;if(!(arguments.length<2)){2==arguments.length?a=e:3==arguments.length?(o=e,a=r):(o=e,i=r,a=n);var s=i??ev.context.active(),u=this.startSpan(t,o,s),l=ev.trace.setSpan(s,u);return ev.context.with(l,a,void 0,u)}},t.prototype.getGeneralLimits=function(){return this._generalLimits},t.prototype.getSpanLimits=function(){return this._spanLimits},t.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},t}();eS();var r7=ey(ro());eS();var nt=ey(eH()),ne=ey(ro()),nr=function(){return(nr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},nn=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},no=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},ni=function(){function t(t,e){var r,n=this;this._attributes=t,this.asyncAttributesPending=null!=e,this._syncAttributes=null!==(r=this._attributes)&&void 0!==r?r:{},this._asyncAttributesPromise=e?.then(function(t){return n._attributes=Object.assign({},n._attributes,t),n.asyncAttributesPending=!1,t},function(t){return ev.diag.debug("a resource's async attributes promise rejected: %s",t),n.asyncAttributesPending=!1,{}})}return t.empty=function(){return t.EMPTY},t.default=function(){var e;return new t(((e={})[nt.SemanticResourceAttributes.SERVICE_NAME]="unknown_service",e[nt.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]=ne.SDK_INFO[nt.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE],e[nt.SemanticResourceAttributes.TELEMETRY_SDK_NAME]=ne.SDK_INFO[nt.SemanticResourceAttributes.TELEMETRY_SDK_NAME],e[nt.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]=ne.SDK_INFO[nt.SemanticResourceAttributes.TELEMETRY_SDK_VERSION],e))},Object.defineProperty(t.prototype,"attributes",{get:function(){var t;return this.asyncAttributesPending&&ev.diag.error("Accessing resource attributes before async attributes settled"),null!==(t=this._attributes)&&void 0!==t?t:{}},enumerable:!1,configurable:!0}),t.prototype.waitForAsyncAttributes=function(){var t,e,r,n;return t=this,e=void 0,r=void 0,n=function(){return nn(this,function(t){switch(t.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(a,s)}u((n=n.apply(t,e||[])).next())})},t.prototype.merge=function(e){var r,n=this;if(!e)return this;var o=nr(nr({},this._syncAttributes),null!==(r=e._syncAttributes)&&void 0!==r?r:e.attributes);return this._asyncAttributesPromise||e._asyncAttributesPromise?new t(o,Promise.all([this._asyncAttributesPromise,e._asyncAttributesPromise]).then(function(t){var r,o=no(t,2),i=o[0],a=o[1];return nr(nr(nr(nr({},n._syncAttributes),i),null!==(r=e._syncAttributes)&&void 0!==r?r:e.attributes),a)})):new t(o)},t.EMPTY=new t({}),t}();eS();var na=ey(ro()),ns=ey(eH()),nu=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nl=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},nc=new(function(){function t(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}return t.prototype.detect=function(t){var e={},r=(0,na.getEnv)(),n=r.OTEL_RESOURCE_ATTRIBUTES,o=r.OTEL_SERVICE_NAME;if(n)try{var i=this._parseResourceAttributes(n);Object.assign(e,i)}catch(t){ev.diag.debug("EnvDetector failed: "+t.message)}return o&&(e[ns.SemanticResourceAttributes.SERVICE_NAME]=o),new ni(e)},t.prototype._parseResourceAttributes=function(t){if(!t)return{};var e,r,n={},o=t.split(this._COMMA_SEPARATOR,-1);try{for(var i=nu(o),a=i.next();!a.done;a=i.next()){var s=a.value.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(2===s.length){var u=nl(s,2),l=u[0],c=u[1];if(l=l.trim(),c=c.trim().split(/^"|"$/).join(""),!this._isValidAndNotEmpty(l))throw Error("Attribute key "+this._ERROR_MESSAGE_INVALID_CHARS);if(!this._isValid(c))throw Error("Attribute value "+this._ERROR_MESSAGE_INVALID_VALUE);n[l]=decodeURIComponent(c)}}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n},t.prototype._isValid=function(t){return t.length<=this._MAX_LENGTH&&this._isBaggageOctetString(t)},t.prototype._isBaggageOctetString=function(t){for(var e=0;e<t.length;e++){var r=t.charCodeAt(e);if(r<33||44===r||59===r||92===r||r>126)return!1}return!0},t.prototype._isValidAndNotEmpty=function(t){return t.length>0&&this._isValid(t)},t}());eS();var np=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},nf=function(t){void 0===t&&(t={});var e,r=(null!==(e=t.detectors)&&void 0!==e?e:[]).map(function(e){try{var r,n,o,i,a,s=e.detect(t);return(a=null!==s&&"object"==typeof s&&"function"==typeof s.then?new ni({},(r=void 0,n=void 0,o=void 0,i=function(){var t;return np(this,function(e){switch(e.label){case 0:return[4,s];case 1:return t=e.sent(),[2,t.attributes]}})},new(o||(o=Promise))(function(t,e){function a(t){try{u(i.next(t))}catch(t){e(t)}}function s(t){try{u(i.throw(t))}catch(t){e(t)}}function u(e){var r;e.done?t(e.value):((r=e.value)instanceof o?r:new o(function(t){t(r)})).then(a,s)}u((i=i.apply(r,n||[])).next())}))):s).waitForAsyncAttributes?a.waitForAsyncAttributes().then(function(){return ev.diag.debug(e.constructor.name+" found resource.",a)}):ev.diag.debug(e.constructor.name+" found resource.",a),a}catch(t){return ev.diag.error(e.constructor.name+" failed: "+t.message),ni.empty()}}),n=r.reduce(function(t,e){return t.merge(e)},ni.empty());return n.waitForAsyncAttributes&&n.waitForAsyncAttributes().then(function(){n_(r)}),n},n_=function(t){t.forEach(function(t){if(Object.keys(t.attributes).length>0){var e=JSON.stringify(t.attributes,null,4);ev.diag.verbose(e)}})},nh=ey(ro()),nd=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nE=function(){function t(t){this._spanProcessors=t}return t.prototype.forceFlush=function(){var t,e,r=[];try{for(var n=nd(this._spanProcessors),o=n.next();!o.done;o=n.next()){var i=o.value;r.push(i.forceFlush())}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return new Promise(function(t){Promise.all(r).then(function(){t()}).catch(function(e){(0,nh.globalErrorHandler)(e||Error("MultiSpanProcessor: forceFlush failed")),t()})})},t.prototype.onStart=function(t,e){var r,n;try{for(var o=nd(this._spanProcessors),i=o.next();!i.done;i=o.next())i.value.onStart(t,e)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},t.prototype.onEnd=function(t){var e,r;try{for(var n=nd(this._spanProcessors),o=n.next();!o.done;o=n.next())o.value.onEnd(t)}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.shutdown=function(){var t,e,r=[];try{for(var n=nd(this._spanProcessors),o=n.next();!o.done;o=n.next()){var i=o.value;r.push(i.shutdown())}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return new Promise(function(t,e){Promise.all(r).then(function(){t()},e)})},t}(),ng=function(){function t(){}return t.prototype.onStart=function(t,e){},t.prototype.onEnd=function(t){},t.prototype.shutdown=function(){return Promise.resolve()},t.prototype.forceFlush=function(){return Promise.resolve()},t}();!function(t){t[t.resolved=0]="resolved",t[t.timeout=1]="timeout",t[t.error=2]="error",t[t.unresolved=3]="unresolved"}(p||(p={}));var nT=function(){function t(t){void 0===t&&(t={}),this._registeredSpanProcessors=[],this._tracers=new Map;var e,r,n,o,i,a,s,u,l,c,p,f,_,h,d,E,g=(0,r7.merge)({},rQ(),(h=Object.assign({},(e=t).spanLimits),d=(0,r0.getEnvWithoutDefaults)(),h.attributeCountLimit=null!==(s=null!==(a=null!==(i=null!==(n=null===(r=e.spanLimits)||void 0===r?void 0:r.attributeCountLimit)&&void 0!==n?n:null===(o=e.generalLimits)||void 0===o?void 0:o.attributeCountLimit)&&void 0!==i?i:d.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)&&void 0!==a?a:d.OTEL_ATTRIBUTE_COUNT_LIMIT)&&void 0!==s?s:r0.DEFAULT_ATTRIBUTE_COUNT_LIMIT,h.attributeValueLengthLimit=null!==(_=null!==(f=null!==(p=null!==(l=null===(u=e.spanLimits)||void 0===u?void 0:u.attributeValueLengthLimit)&&void 0!==l?l:null===(c=e.generalLimits)||void 0===c?void 0:c.attributeValueLengthLimit)&&void 0!==p?p:d.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==f?f:d.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==_?_:r0.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,Object.assign({},e,{spanLimits:h})));this.resource=null!==(E=g.resource)&&void 0!==E?E:ni.empty(),this.resource=ni.default().merge(this.resource),this._config=Object.assign({},g,{resource:this.resource});var T=this._buildExporterFromEnv();if(void 0!==T){var y=new r4(T);this.activeSpanProcessor=y}else this.activeSpanProcessor=new ng}return t.prototype.getTracer=function(t,e,r){var n=t+"@"+(e||"")+":"+(r?.schemaUrl||"");return this._tracers.has(n)||this._tracers.set(n,new r9({name:t,version:e,schemaUrl:r?.schemaUrl},this._config,this)),this._tracers.get(n)},t.prototype.addSpanProcessor=function(t){0===this._registeredSpanProcessors.length&&this.activeSpanProcessor.shutdown().catch(function(t){return ev.diag.error("Error while trying to shutdown current span processor",t)}),this._registeredSpanProcessors.push(t),this.activeSpanProcessor=new nE(this._registeredSpanProcessors)},t.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},t.prototype.register=function(t){void 0===t&&(t={}),ev.trace.setGlobalTracerProvider(this),void 0===t.propagator&&(t.propagator=this._buildPropagatorFromEnv()),t.contextManager&&ev.context.setGlobalContextManager(t.contextManager),t.propagator&&ev.propagation.setGlobalPropagator(t.propagator)},t.prototype.forceFlush=function(){var t=this._config.forceFlushTimeoutMillis,e=this._registeredSpanProcessors.map(function(e){return new Promise(function(r){var n,o=setTimeout(function(){r(Error("Span processor did not completed within timeout period of "+t+" ms")),n=p.timeout},t);e.forceFlush().then(function(){clearTimeout(o),n!==p.timeout&&r(n=p.resolved)}).catch(function(t){clearTimeout(o),n=p.error,r(t)})})});return new Promise(function(t,r){Promise.all(e).then(function(e){var n=e.filter(function(t){return t!==p.resolved});n.length>0?r(n):t()}).catch(function(t){return r([t])})})},t.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},t.prototype._getPropagator=function(t){var e;return null===(e=this.constructor._registeredPropagators.get(t))||void 0===e?void 0:e()},t.prototype._getSpanExporter=function(t){var e;return null===(e=this.constructor._registeredExporters.get(t))||void 0===e?void 0:e()},t.prototype._buildPropagatorFromEnv=function(){var t=this,e=Array.from(new Set((0,r7.getEnv)().OTEL_PROPAGATORS)),r=e.map(function(e){var r=t._getPropagator(e);return r||ev.diag.warn('Propagator "'+e+'" requested through environment variable is unavailable.'),r}).reduce(function(t,e){return e&&t.push(e),t},[]);if(0!==r.length)return 1===e.length?r[0]:new r7.CompositePropagator({propagators:r})},t.prototype._buildExporterFromEnv=function(){var t=(0,r7.getEnv)().OTEL_TRACES_EXPORTER;if(!("none"===t||""===t)){var e=this._getSpanExporter(t);return e||ev.diag.error('Exporter "'+t+'" requested through environment variable is unavailable.'),e}},t._registeredPropagators=new Map([["tracecontext",function(){return new r7.W3CTraceContextPropagator}],["baggage",function(){return new r7.W3CBaggagePropagator}]]),t._registeredExporters=new Map,t}();eS();var ny={};eT(ny,d);var nm=ey(ra(),1);eS();var nv=ey(ro());eS(),eS(),eS();var nS=ey(ro()),nA=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nb=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},nO=function(){function t(t,e,r){this.attributes={},this.totalAttributesCount=0,this._isReadonly=!1;var n=r.timestamp,o=r.observedTimestamp,i=r.severityNumber,a=r.severityText,s=r.body,u=r.attributes,l=r.context,c=Date.now();if(this.hrTime=(0,nS.timeInputToHrTime)(n??c),this.hrTimeObserved=(0,nS.timeInputToHrTime)(o??c),l){var p=ev.trace.getSpanContext(l);p&&ev.isSpanContextValid(p)&&(this.spanContext=p)}this.severityNumber=i,this.severityText=a,this.body=s,this.resource=t.resource,this.instrumentationScope=e,this._logRecordLimits=t.logRecordLimits,this.setAttributes(void 0===u?{}:u)}return Object.defineProperty(t.prototype,"severityText",{get:function(){return this._severityText},set:function(t){this._isLogRecordReadonly()||(this._severityText=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"severityNumber",{get:function(){return this._severityNumber},set:function(t){this._isLogRecordReadonly()||(this._severityNumber=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"body",{get:function(){return this._body},set:function(t){this._isLogRecordReadonly()||(this._body=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedAttributesCount",{get:function(){return this.totalAttributesCount-Object.keys(this.attributes).length},enumerable:!1,configurable:!0}),t.prototype.setAttribute=function(t,e){return this._isLogRecordReadonly()||null===e||(0===t.length?ev.diag.warn("Invalid attribute key: "+t):(0,nS.isAttributeValue)(e)||"object"==typeof e&&!Array.isArray(e)&&Object.keys(e).length>0?(this.totalAttributesCount+=1,Object.keys(this.attributes).length>=this._logRecordLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,t)||((0,nS.isAttributeValue)(e)?this.attributes[t]=this._truncateToSize(e):this.attributes[t]=e)):ev.diag.warn("Invalid attribute value set for key: "+t)),this},t.prototype.setAttributes=function(t){var e,r;try{for(var n=nA(Object.entries(t)),o=n.next();!o.done;o=n.next()){var i=nb(o.value,2),a=i[0],s=i[1];this.setAttribute(a,s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return this},t.prototype.setBody=function(t){return this.body=t,this},t.prototype.setSeverityNumber=function(t){return this.severityNumber=t,this},t.prototype.setSeverityText=function(t){return this.severityText=t,this},t.prototype._makeReadonly=function(){this._isReadonly=!0},t.prototype._truncateToSize=function(t){var e=this,r=this._logRecordLimits.attributeValueLengthLimit;return r<=0?(ev.diag.warn("Attribute value limit must be positive, got "+r),t):"string"==typeof t?this._truncateToLimitUtil(t,r):Array.isArray(t)?t.map(function(t){return"string"==typeof t?e._truncateToLimitUtil(t,r):t}):t},t.prototype._truncateToLimitUtil=function(t,e){return t.length<=e?t:t.substring(0,e)},t.prototype._isLogRecordReadonly=function(){return this._isReadonly&&ev.diag.warn("Can not execute the operation on emitted log record"),this._isReadonly},t}(),nR=function(){return(nR=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},nL=function(){function t(t,e){this.instrumentationScope=t,this._sharedState=e}return t.prototype.emit=function(t){var e=t.context||ev.context.active(),r=new nO(this._sharedState,this.instrumentationScope,nR({context:e},t));this._sharedState.activeProcessor.onEmit(r,e),r._makeReadonly()},t}(),nP=ey(ro()),nC=ey(ro()),nN=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(a,s)}u((n=n.apply(t,e||[])).next())})},nI=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},nw=function(){function t(t,e){this.processors=t,this.forceFlushTimeoutMillis=e}return t.prototype.forceFlush=function(){return nN(this,void 0,void 0,function(){var t;return nI(this,function(e){switch(e.label){case 0:return t=this.forceFlushTimeoutMillis,[4,Promise.all(this.processors.map(function(e){return(0,nC.callWithTimeout)(e.forceFlush(),t)}))];case 1:return e.sent(),[2]}})})},t.prototype.onEmit=function(t,e){this.processors.forEach(function(r){return r.onEmit(t,e)})},t.prototype.shutdown=function(){return nN(this,void 0,void 0,function(){return nI(this,function(t){switch(t.label){case 0:return[4,Promise.all(this.processors.map(function(t){return t.shutdown()}))];case 1:return t.sent(),[2]}})})},t}(),nM=function(){function t(){}return t.prototype.forceFlush=function(){return Promise.resolve()},t.prototype.onEmit=function(t,e){},t.prototype.shutdown=function(){return Promise.resolve()},t}(),nD=function(t,e,r){this.resource=t,this.forceFlushTimeoutMillis=e,this.logRecordLimits=r,this.loggers=new Map,this.registeredLogRecordProcessors=[],this.activeProcessor=new nM},nU=function(){function t(t){void 0===t&&(t={});var e,r,n,o,i,a,s,u=(0,nv.merge)({},{forceFlushTimeoutMillis:3e4,logRecordLimits:{attributeValueLengthLimit:(0,nP.getEnv)().OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:(0,nP.getEnv)().OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT},includeTraceContext:!0},t),l=u.resource,c=void 0===l?ni.default():l,p=u.logRecordLimits,f=u.forceFlushTimeoutMillis;this._sharedState=new nD(c,f,(s=(0,nP.getEnvWithoutDefaults)(),{attributeCountLimit:null!==(n=null!==(r=null!==(e=p.attributeCountLimit)&&void 0!==e?e:s.OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT)&&void 0!==r?r:s.OTEL_ATTRIBUTE_COUNT_LIMIT)&&void 0!==n?n:nP.DEFAULT_ATTRIBUTE_COUNT_LIMIT,attributeValueLengthLimit:null!==(a=null!==(i=null!==(o=p.attributeValueLengthLimit)&&void 0!==o?o:s.OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==i?i:s.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==a?a:nP.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT})),this._shutdownOnce=new nv.BindOnceFuture(this._shutdown,this)}return t.prototype.getLogger=function(t,e,r){if(this._shutdownOnce.isCalled)return ev.diag.warn("A shutdown LoggerProvider cannot provide a Logger"),ny.NOOP_LOGGER;t||ev.diag.warn("Logger requested without instrumentation scope name.");var n=t||"unknown",o=n+"@"+(e||"")+":"+(r?.schemaUrl||"");return this._sharedState.loggers.has(o)||this._sharedState.loggers.set(o,new nL({name:n,version:e,schemaUrl:r?.schemaUrl},this._sharedState)),this._sharedState.loggers.get(o)},t.prototype.addLogRecordProcessor=function(t){0===this._sharedState.registeredLogRecordProcessors.length&&this._sharedState.activeProcessor.shutdown().catch(function(t){return ev.diag.error("Error while trying to shutdown current log record processor",t)}),this._sharedState.registeredLogRecordProcessors.push(t),this._sharedState.activeProcessor=new nw(this._sharedState.registeredLogRecordProcessors,this._sharedState.forceFlushTimeoutMillis)},t.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?(ev.diag.warn("invalid attempt to force flush after LoggerProvider shutdown"),this._shutdownOnce.promise):this._sharedState.activeProcessor.forceFlush()},t.prototype.shutdown=function(){return this._shutdownOnce.isCalled?(ev.diag.warn("shutdown may only be called once per LoggerProvider"),this._shutdownOnce.promise):this._shutdownOnce.call()},t.prototype._shutdown=function(){return this._sharedState.activeProcessor.shutdown()},t}();!function(t){t[t.DELTA=0]="DELTA",t[t.CUMULATIVE=1]="CUMULATIVE"}(f||(f={}));var nx=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nB=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(a,s)}u((n=n.apply(t,e||[])).next())})},nG=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},nV=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function nk(t){return null!=t}function nj(t){var e=Object.keys(t);return 0===e.length?"":JSON.stringify((e=e.sort()).map(function(e){return[e,t[e]]}))}var nF=function(t){function e(r){var n=t.call(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return nx(e,t),e}(Error);function nH(t,e){var r;return Promise.race([t,new Promise(function(t,n){r=setTimeout(function(){n(new nF("Operation timed out."))},e)})]).then(function(t){return clearTimeout(r),t},function(t){throw clearTimeout(r),t})}function nX(t){return"rejected"===t.status}function nK(t,e,r){var n,o,i,a;return null!=t.match(nW)||ev.diag.warn('Invalid metric name: "'+t+'". The metric name should be a ASCII string with a length no greater than 255 characters.'),{name:t,type:e,description:null!==(n=r?.description)&&void 0!==n?n:"",unit:null!==(o=r?.unit)&&void 0!==o?o:"",valueType:null!==(i=r?.valueType)&&void 0!==i?i:ev.ValueType.DOUBLE,advice:null!==(a=r?.advice)&&void 0!==a?a:{}}}eS(),function(t){t.COUNTER="COUNTER",t.HISTOGRAM="HISTOGRAM",t.UP_DOWN_COUNTER="UP_DOWN_COUNTER",t.OBSERVABLE_COUNTER="OBSERVABLE_COUNTER",t.OBSERVABLE_GAUGE="OBSERVABLE_GAUGE",t.OBSERVABLE_UP_DOWN_COUNTER="OBSERVABLE_UP_DOWN_COUNTER"}(_||(_={}));var nW=/^[a-z][a-z0-9_.\-/]{0,254}$/i;eS();var nY=function(){function t(){this._registeredViews=[]}return t.prototype.addView=function(t){this._registeredViews.push(t)},t.prototype.findViews=function(t,e){var r=this;return this._registeredViews.filter(function(n){return r._matchInstrument(n.instrumentSelector,t)&&r._matchMeter(n.meterSelector,e)})},t.prototype._matchInstrument=function(t,e){return(void 0===t.getType()||e.type===t.getType())&&t.getNameFilter().match(e.name)&&t.getUnitFilter().match(e.unit)},t.prototype._matchMeter=function(t,e){return t.getNameFilter().match(e.name)&&(void 0===e.version||t.getVersionFilter().match(e.version))&&(void 0===e.schemaUrl||t.getSchemaUrlFilter().match(e.schemaUrl))},t}();eS();var nz=ey(ro()),n$=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nq=function(){function t(t,e){this._writableMetricStorage=t,this._descriptor=e}return t.prototype._record=function(t,e,r){if(void 0===e&&(e={}),void 0===r&&(r=ev.context.active()),"number"!=typeof t){ev.diag.warn("non-number value provided to metric "+this._descriptor.name+": "+t);return}(this._descriptor.valueType!==ev.ValueType.INT||Number.isInteger(t)||(ev.diag.warn("INT value type cannot accept a floating-point value for "+this._descriptor.name+", ignoring the fractional digits."),Number.isInteger(t=Math.trunc(t))))&&this._writableMetricStorage.record(t,e,r,(0,nz.millisToHrTime)(Date.now()))},t}(),nQ=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n$(e,t),e.prototype.add=function(t,e,r){this._record(t,e,r)},e}(nq),nZ=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n$(e,t),e.prototype.add=function(t,e,r){if(t<0){ev.diag.warn("negative value provided to counter "+this._descriptor.name+": "+t);return}this._record(t,e,r)},e}(nq),nJ=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n$(e,t),e.prototype.record=function(t,e,r){if(t<0){ev.diag.warn("negative value provided to histogram "+this._descriptor.name+": "+t);return}this._record(t,e,r)},e}(nq),n0=function(){function t(t,e,r){this._observableRegistry=r,this._descriptor=t,this._metricStorages=e}return t.prototype.addCallback=function(t){this._observableRegistry.addCallback(t,this)},t.prototype.removeCallback=function(t){this._observableRegistry.removeCallback(t,this)},t}(),n1=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n$(e,t),e}(n0),n2=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n$(e,t),e}(n0),n3=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n$(e,t),e}(n0);function n4(t){return t instanceof n0}var n6=function(){function t(t){this._meterSharedState=t}return t.prototype.createHistogram=function(t,e){var r=nK(t,_.HISTOGRAM,e);return new nJ(this._meterSharedState.registerMetricStorage(r),r)},t.prototype.createCounter=function(t,e){var r=nK(t,_.COUNTER,e);return new nZ(this._meterSharedState.registerMetricStorage(r),r)},t.prototype.createUpDownCounter=function(t,e){var r=nK(t,_.UP_DOWN_COUNTER,e);return new nQ(this._meterSharedState.registerMetricStorage(r),r)},t.prototype.createObservableGauge=function(t,e){var r=nK(t,_.OBSERVABLE_GAUGE,e),n=this._meterSharedState.registerAsyncMetricStorage(r);return new n2(r,n,this._meterSharedState.observableRegistry)},t.prototype.createObservableCounter=function(t,e){var r=nK(t,_.OBSERVABLE_COUNTER,e),n=this._meterSharedState.registerAsyncMetricStorage(r);return new n1(r,n,this._meterSharedState.observableRegistry)},t.prototype.createObservableUpDownCounter=function(t,e){var r=nK(t,_.OBSERVABLE_UP_DOWN_COUNTER,e),n=this._meterSharedState.registerAsyncMetricStorage(r);return new n3(r,n,this._meterSharedState.observableRegistry)},t.prototype.addBatchObservableCallback=function(t,e){this._meterSharedState.observableRegistry.addBatchCallback(t,e)},t.prototype.removeBatchObservableCallback=function(t,e){this._meterSharedState.observableRegistry.removeBatchCallback(t,e)},t}(),n8=function(){function t(t){this._instrumentDescriptor=t}return t.prototype.getInstrumentDescriptor=function(){return this._instrumentDescriptor},t.prototype.updateDescription=function(t){this._instrumentDescriptor=nK(this._instrumentDescriptor.name,this._instrumentDescriptor.type,{description:t,valueType:this._instrumentDescriptor.valueType,unit:this._instrumentDescriptor.unit,advice:this._instrumentDescriptor.advice})},t}(),n5=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),n9=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},n7=function(t){function e(){return t.call(this,nj)||this}return n5(e,t),e}(function(){function t(t){this._hash=t,this._valueMap=new Map,this._keyMap=new Map}return t.prototype.get=function(t,e){return e??(e=this._hash(t)),this._valueMap.get(e)},t.prototype.getOrDefault=function(t,e){var r=this._hash(t);if(this._valueMap.has(r))return this._valueMap.get(r);var n=e();return this._keyMap.has(r)||this._keyMap.set(r,t),this._valueMap.set(r,n),n},t.prototype.set=function(t,e,r){r??(r=this._hash(t)),this._keyMap.has(r)||this._keyMap.set(r,t),this._valueMap.set(r,e)},t.prototype.has=function(t,e){return e??(e=this._hash(t)),this._valueMap.has(e)},t.prototype.keys=function(){var t,e;return n9(this,function(r){switch(r.label){case 0:e=(t=this._keyMap.entries()).next(),r.label=1;case 1:return!0===e.done?[3,3]:[4,[e.value[1],e.value[0]]];case 2:return r.sent(),e=t.next(),[3,1];case 3:return[2]}})},t.prototype.entries=function(){var t,e;return n9(this,function(r){switch(r.label){case 0:e=(t=this._valueMap.entries()).next(),r.label=1;case 1:return!0===e.done?[3,3]:[4,[this._keyMap.get(e.value[0]),e.value[1],e.value[0]]];case 2:return r.sent(),e=t.next(),[3,1];case 3:return[2]}})},Object.defineProperty(t.prototype,"size",{get:function(){return this._valueMap.size},enumerable:!1,configurable:!0}),t}()),ot=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},oe=function(){function t(t){this._aggregator=t,this._activeCollectionStorage=new n7,this._cumulativeMemoStorage=new n7}return t.prototype.record=function(t,e,r,n){var o=this,i=this._activeCollectionStorage.getOrDefault(e,function(){return o._aggregator.createAccumulation(n)});i?.record(t)},t.prototype.batchCumulate=function(t,e){var r=this;Array.from(t.entries()).forEach(function(t){var n=ot(t,3),o=n[0],i=n[1],a=n[2],s=r._aggregator.createAccumulation(e);s?.record(i);var u=s;if(r._cumulativeMemoStorage.has(o,a)){var l=r._cumulativeMemoStorage.get(o,a);u=r._aggregator.diff(l,s)}if(r._activeCollectionStorage.has(o,a)){var c=r._activeCollectionStorage.get(o,a);u=r._aggregator.merge(c,u)}r._cumulativeMemoStorage.set(o,s,a),r._activeCollectionStorage.set(o,u,a)})},t.prototype.collect=function(){var t=this._activeCollectionStorage;return this._activeCollectionStorage=new n7,t},t}(),or=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},on=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},oo=function(){function t(t,e){var r=this;this._aggregator=t,this._unreportedAccumulations=new Map,this._reportHistory=new Map,e.forEach(function(t){r._unreportedAccumulations.set(t,[])})}return t.prototype.buildMetrics=function(e,r,n,o){this._stashAccumulations(n);var i,a=this._getMergedUnreportedAccumulations(e),s=a;if(this._reportHistory.has(e)){var u=this._reportHistory.get(e),l=u.collectionTime;s=(i=u.aggregationTemporality)===f.CUMULATIVE?t.merge(u.accumulations,a,this._aggregator):t.calibrateStartTime(u.accumulations,a,l)}else i=e.selectAggregationTemporality(r.type);this._reportHistory.set(e,{accumulations:s,collectionTime:o,aggregationTemporality:i});var c=Array.from(s.entries());if(0!==c.length)return this._aggregator.toMetricData(r,i,c,o)},t.prototype._stashAccumulations=function(t){var e,r,n=this._unreportedAccumulations.keys();try{for(var o=or(n),i=o.next();!i.done;i=o.next()){var a=i.value,s=this._unreportedAccumulations.get(a);void 0===s&&(s=[],this._unreportedAccumulations.set(a,s)),s.push(t)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}},t.prototype._getMergedUnreportedAccumulations=function(e){var r,n,o=new n7,i=this._unreportedAccumulations.get(e);if(this._unreportedAccumulations.set(e,[]),void 0===i)return o;try{for(var a=or(i),s=a.next();!s.done;s=a.next()){var u=s.value;o=t.merge(o,u,this._aggregator)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o},t.merge=function(t,e,r){for(var n=e.entries(),o=n.next();!0!==o.done;){var i=on(o.value,3),a=i[0],s=i[1],u=i[2];if(t.has(a,u)){var l=t.get(a,u),c=r.merge(l,s);t.set(a,c,u)}else t.set(a,s,u);o=n.next()}return t},t.calibrateStartTime=function(t,e,r){var n,o;try{for(var i=or(t.keys()),a=i.next();!a.done;a=i.next()){var s=on(a.value,2),u=s[0],l=s[1],c=e.get(u,l);c?.setStartTime(r)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return e},t}(),oi=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),oa=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},os=function(t){function e(e,r,n,o){var i=t.call(this,e)||this;return i._attributesProcessor=n,i._deltaMetricStorage=new oe(r),i._temporalMetricStorage=new oo(r,o),i}return oi(e,t),e.prototype.record=function(t,e){var r=this,n=new n7;Array.from(t.entries()).forEach(function(t){var e=oa(t,2),o=e[0],i=e[1];n.set(r._attributesProcessor.process(o),i)}),this._deltaMetricStorage.batchCumulate(n,e)},e.prototype.collect=function(t,e){var r=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,this._instrumentDescriptor,r,e)},e}(n8);function ou(t,e){var r="";return t.unit!==e.unit&&(r+="	- Unit '"+t.unit+"' does not match '"+e.unit+`'
`),t.type!==e.type&&(r+="	- Type '"+t.type+"' does not match '"+e.type+`'
`),t.valueType!==e.valueType&&(r+="	- Value Type '"+t.valueType+"' does not match '"+e.valueType+`'
`),t.description!==e.description&&(r+="	- Description '"+t.description+"' does not match '"+e.description+`'
`),r}function ol(t,e){var r,n;return t.valueType!==e.valueType?"	- use valueType '"+t.valueType+"' on instrument creation or use an instrument name other than '"+e.name+"'":t.unit!==e.unit?"	- use unit '"+t.unit+"' on instrument creation or use an instrument name other than '"+e.name+"'":t.type!==e.type?(r=JSON.stringify({name:e.name,type:e.type,unit:e.unit}),"	- create a new view with a name other than '"+t.name+"' and InstrumentSelector '"+r+"'"):t.description!==e.description?(n=JSON.stringify({name:e.name,type:e.type,unit:e.unit}),"	- create a new view with a name other than '"+t.name+"' and InstrumentSelector '"+n+`'
    	- OR - create a new view with the name `+t.name+" and description '"+t.description+"' and InstrumentSelector "+n+`
    	- OR - create a new view with the name `+e.name+" and description '"+t.description+"' and InstrumentSelector "+n):""}eS();var oc=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},op=function(){function t(){this._sharedRegistry=new Map,this._perCollectorRegistry=new Map}return t.create=function(){return new t},t.prototype.getStorages=function(t){var e,r,n,o,i=[];try{for(var a=oc(this._sharedRegistry.values()),s=a.next();!s.done;s=a.next()){var u=s.value;i=i.concat(u)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}var l=this._perCollectorRegistry.get(t);if(null!=l)try{for(var c=oc(l.values()),p=c.next();!p.done;p=c.next()){var u=p.value;i=i.concat(u)}}catch(t){n={error:t}}finally{try{p&&!p.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}return i},t.prototype.register=function(t){this._registerStorage(t,this._sharedRegistry)},t.prototype.registerForCollector=function(t,e){var r=this._perCollectorRegistry.get(t);null==r&&(r=new Map,this._perCollectorRegistry.set(t,r)),this._registerStorage(e,r)},t.prototype.findOrUpdateCompatibleStorage=function(t){var e=this._sharedRegistry.get(t.name);return void 0===e?null:this._findOrUpdateCompatibleStorage(t,e)},t.prototype.findOrUpdateCompatibleCollectorStorage=function(t,e){var r=this._perCollectorRegistry.get(t);if(void 0===r)return null;var n=r.get(e.name);return void 0===n?null:this._findOrUpdateCompatibleStorage(e,n)},t.prototype._registerStorage=function(t,e){var r=t.getInstrumentDescriptor(),n=e.get(r.name);if(void 0===n){e.set(r.name,[t]);return}n.push(t)},t.prototype._findOrUpdateCompatibleStorage=function(t,e){var r,n,o=null;try{for(var i=oc(e),a=i.next();!a.done;a=i.next()){var s=a.value,u=s.getInstrumentDescriptor();(function(t,e){var r,n;return r=t.name,n=e.name,r.toLowerCase()===n.toLowerCase()&&t.unit===e.unit&&t.type===e.type&&t.valueType===e.valueType})(u,t)?(u.description!==t.description&&(t.description.length>u.description.length&&s.updateDescription(t.description),ev.diag.warn("A view or instrument with the name ",t.name,` has already been registered, but has a different description and is incompatible with another registered view.
`,`Details:
`,ou(u,t),`The longer description will be used.
To resolve the conflict:`,ol(u,t))),o=s):ev.diag.warn("A view or instrument with the name ",t.name,` has already been registered and is incompatible with another registered view.
`,`Details:
`,ou(u,t),`To resolve the conflict:
`,ol(u,t))}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o},t}(),of=function(){function t(t){this._backingStorages=t}return t.prototype.record=function(t,e,r,n){this._backingStorages.forEach(function(o){o.record(t,e,r,n)})},t}();eS(),eS();var o_=function(){function t(t,e){this._instrumentName=t,this._valueType=e,this._buffer=new n7}return t.prototype.observe=function(t,e){if(void 0===e&&(e={}),"number"!=typeof t){ev.diag.warn("non-number value provided to metric "+this._instrumentName+": "+t);return}(this._valueType!==ev.ValueType.INT||Number.isInteger(t)||(ev.diag.warn("INT value type cannot accept a floating-point value for "+this._instrumentName+", ignoring the fractional digits."),Number.isInteger(t=Math.trunc(t))))&&this._buffer.set(e,t)},t}(),oh=function(){function t(){this._buffer=new Map}return t.prototype.observe=function(t,e,r){if(void 0===r&&(r={}),n4(t)){var n=this._buffer.get(t);if(null==n&&(n=new n7,this._buffer.set(t,n)),"number"!=typeof e){ev.diag.warn("non-number value provided to metric "+t._descriptor.name+": "+e);return}(t._descriptor.valueType!==ev.ValueType.INT||Number.isInteger(e)||(ev.diag.warn("INT value type cannot accept a floating-point value for "+t._descriptor.name+", ignoring the fractional digits."),Number.isInteger(e=Math.trunc(e))))&&n.set(r,e)}},t}(),od=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(a,s)}u((n=n.apply(t,e||[])).next())})},oE=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},og=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},oT=function(t,e,r){if(r||2==arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},oy=function(){function t(){this._callbacks=[],this._batchCallbacks=[]}return t.prototype.addCallback=function(t,e){this._findCallback(t,e)>=0||this._callbacks.push({callback:t,instrument:e})},t.prototype.removeCallback=function(t,e){var r=this._findCallback(t,e);r<0||this._callbacks.splice(r,1)},t.prototype.addBatchCallback=function(t,e){var r=new Set(e.filter(n4));if(0===r.size){ev.diag.error("BatchObservableCallback is not associated with valid instruments",e);return}this._findBatchCallback(t,r)>=0||this._batchCallbacks.push({callback:t,instruments:r})},t.prototype.removeBatchCallback=function(t,e){var r=new Set(e.filter(n4)),n=this._findBatchCallback(t,r);n<0||this._batchCallbacks.splice(n,1)},t.prototype.observe=function(t,e){return od(this,void 0,void 0,function(){var r,n;return oE(this,function(o){switch(o.label){case 0:return r=this._observeCallbacks(t,e),n=this._observeBatchCallbacks(t,e),[4,function(t){return nB(this,void 0,void 0,function(){var e=this;return nG(this,function(r){return[2,Promise.all(t.map(function(t){return nB(e,void 0,void 0,function(){return nG(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,t];case 1:return[2,{status:"fulfilled",value:e.sent()}];case 2:return[2,{status:"rejected",reason:e.sent()}];case 3:return[2]}})})}))]})})}(oT(oT([],og(r),!1),og(n),!1))];case 1:return[2,o.sent().filter(nX).map(function(t){return t.reason})]}})})},t.prototype._observeCallbacks=function(t,e){var r=this;return this._callbacks.map(function(n){var o=n.callback,i=n.instrument;return od(r,void 0,void 0,function(){var r,n;return oE(this,function(a){switch(a.label){case 0:return n=Promise.resolve(o(r=new o_(i._descriptor.name,i._descriptor.valueType))),null!=e&&(n=nH(n,e)),[4,n];case 1:return a.sent(),i._metricStorages.forEach(function(e){e.record(r._buffer,t)}),[2]}})})})},t.prototype._observeBatchCallbacks=function(t,e){var r=this;return this._batchCallbacks.map(function(n){var o=n.callback,i=n.instruments;return od(r,void 0,void 0,function(){var r,n;return oE(this,function(a){switch(a.label){case 0:return n=Promise.resolve(o(r=new oh)),null!=e&&(n=nH(n,e)),[4,n];case 1:return a.sent(),i.forEach(function(e){var n=r._buffer.get(e);null!=n&&e._metricStorages.forEach(function(e){e.record(n,t)})}),[2]}})})})},t.prototype._findCallback=function(t,e){return this._callbacks.findIndex(function(r){return r.callback===t&&r.instrument===e})},t.prototype._findBatchCallback=function(t,e){return this._batchCallbacks.findIndex(function(r){return r.callback===t&&function(t,e){var r,n;if(t.size!==e.size)return!1;try{for(var o=nV(t),i=o.next();!i.done;i=o.next()){var a=i.value;if(!e.has(a))return!1}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!0}(r.instruments,e)})},t}(),om=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ov=function(t){function e(e,r,n,o){var i=t.call(this,e)||this;return i._attributesProcessor=n,i._deltaMetricStorage=new oe(r),i._temporalMetricStorage=new oo(r,o),i}return om(e,t),e.prototype.record=function(t,e,r,n){e=this._attributesProcessor.process(e,r),this._deltaMetricStorage.record(t,e,r,n)},e.prototype.collect=function(t,e){var r=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,this._instrumentDescriptor,r,e)},e}(n8),oS=function(){var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),oA=function(){function t(){}return t.Noop=function(){return oO},t}(),ob=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return oS(e,t),e.prototype.process=function(t,e){return t},e}(oA);!function(t){function e(e){var r=t.call(this)||this;return r._allowedAttributeNames=e,r}oS(e,t),e.prototype.process=function(t,e){var r=this,n={};return Object.keys(t).filter(function(t){return r._allowedAttributeNames.includes(t)}).forEach(function(e){return n[e]=t[e]}),n}}(oA);var oO=new ob,oR=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},oL=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},oP=function(){function t(t,e){this._meterProviderSharedState=t,this._instrumentationScope=e,this.metricStorageRegistry=new op,this.observableRegistry=new oy,this.meter=new n6(this)}return t.prototype.registerMetricStorage=function(t){var e=this._registerMetricStorage(t,ov);return 1===e.length?e[0]:new of(e)},t.prototype.registerAsyncMetricStorage=function(t){return this._registerMetricStorage(t,os)},t.prototype.collect=function(t,e,r){var n,o,i,a;return n=this,o=void 0,i=void 0,a=function(){var n,o,i;return oR(this,function(a){switch(a.label){case 0:return[4,this.observableRegistry.observe(e,r?.timeoutMillis)];case 1:return n=a.sent(),0===(o=this.metricStorageRegistry.getStorages(t)).length?[2,null]:0===(i=o.map(function(r){return r.collect(t,e)}).filter(nk)).length?[2,{errors:n}]:[2,{scopeMetrics:{scope:this._instrumentationScope,metrics:i},errors:n}]}})},new(i||(i=Promise))(function(t,e){function r(t){try{u(a.next(t))}catch(t){e(t)}}function s(t){try{u(a.throw(t))}catch(t){e(t)}}function u(e){var n;e.done?t(e.value):((n=e.value)instanceof i?n:new i(function(t){t(n)})).then(r,s)}u((a=a.apply(n,o||[])).next())})},t.prototype._registerMetricStorage=function(t,e){var r=this,n=this._meterProviderSharedState.viewRegistry.findViews(t,this._instrumentationScope).map(function(n){var o,i,a={name:null!==(o=n.name)&&void 0!==o?o:t.name,description:null!==(i=n.description)&&void 0!==i?i:t.description,type:t.type,unit:t.unit,valueType:t.valueType,advice:t.advice},s=r.metricStorageRegistry.findOrUpdateCompatibleStorage(a);if(null!=s)return s;var u=n.aggregation.createAggregator(a),l=new e(a,u,n.attributesProcessor,r._meterProviderSharedState.metricCollectors);return r.metricStorageRegistry.register(l),l});if(0===n.length){var o=this._meterProviderSharedState.selectAggregations(t.type).map(function(n){var o=oL(n,2),i=o[0],a=o[1],s=r.metricStorageRegistry.findOrUpdateCompatibleCollectorStorage(i,t);if(null!=s)return s;var u=a.createAggregator(t),l=new e(t,u,oA.Noop(),[i]);return r.metricStorageRegistry.registerForCollector(i,l),l});n=n.concat(o)}return n},t}(),oC=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oN=function(){function t(t){this.resource=t,this.viewRegistry=new nY,this.metricCollectors=[],this.meterSharedStates=new Map}return t.prototype.getMeterSharedState=function(t){var e,r,n=t.name+":"+(null!==(e=t.version)&&void 0!==e?e:"")+":"+(null!==(r=t.schemaUrl)&&void 0!==r?r:""),o=this.meterSharedStates.get(n);return null==o&&(o=new oP(this,t),this.meterSharedStates.set(n,o)),o},t.prototype.selectAggregations=function(t){var e,r,n=[];try{for(var o=oC(this.metricCollectors),i=o.next();!i.done;i=o.next()){var a=i.value;n.push([a,a.selectAggregation(t)])}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n},t}(),oI=ey(ro()),ow=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(a,s)}u((n=n.apply(t,e||[])).next())})},oM=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},oD=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},oU=function(t,e,r){if(r||2==arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},ox=function(){function t(t,e){this._sharedState=t,this._metricReader=e}return t.prototype.collect=function(t){return ow(this,void 0,void 0,function(){var e,r,n,o=this;return oM(this,function(i){switch(i.label){case 0:return e=(0,oI.millisToHrTime)(Date.now()),r=[],n=[],[4,Promise.all(Array.from(this._sharedState.meterSharedStates.values()).map(function(i){return ow(o,void 0,void 0,function(){var o;return oM(this,function(a){switch(a.label){case 0:return[4,i.collect(this,e,t)];case 1:return o=a.sent(),o?.scopeMetrics!=null&&r.push(o.scopeMetrics),o?.errors!=null&&n.push.apply(n,oU([],oD(o.errors),!1)),[2]}})})}))];case 1:return i.sent(),[2,{resourceMetrics:{resource:this._sharedState.resource,scopeMetrics:r},errors:n}]}})})},t.prototype.forceFlush=function(t){return ow(this,void 0,void 0,function(){return oM(this,function(e){switch(e.label){case 0:return[4,this._metricReader.forceFlush(t)];case 1:return e.sent(),[2]}})})},t.prototype.shutdown=function(t){return ow(this,void 0,void 0,function(){return oM(this,function(e){switch(e.label){case 0:return[4,this._metricReader.shutdown(t)];case 1:return e.sent(),[2]}})})},t.prototype.selectAggregationTemporality=function(t){return this._metricReader.selectAggregationTemporality(t)},t.prototype.selectAggregation=function(t){return this._metricReader.selectAggregation(t)},t}(),oB=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(a,s)}u((n=n.apply(t,e||[])).next())})},oG=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},oV=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ok=function(){function t(t){this._shutdown=!1;var e,r,n,o=ni.default().merge(null!==(n=t?.resource)&&void 0!==n?n:ni.empty());if(this._sharedState=new oN(o),t?.views!=null&&t.views.length>0)try{for(var i=oV(t.views),a=i.next();!a.done;a=i.next()){var s=a.value;this._sharedState.viewRegistry.addView(s)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}}return t.prototype.getMeter=function(t,e,r){return void 0===e&&(e=""),void 0===r&&(r={}),this._shutdown?(ev.diag.warn("A shutdown MeterProvider cannot provide a Meter"),(0,ev.createNoopMeter)()):this._sharedState.getMeterSharedState({name:t,version:e,schemaUrl:r.schemaUrl}).meter},t.prototype.addMetricReader=function(t){var e=new ox(this._sharedState,t);t.setMetricProducer(e),this._sharedState.metricCollectors.push(e)},t.prototype.shutdown=function(t){return oB(this,void 0,void 0,function(){return oG(this,function(e){switch(e.label){case 0:return this._shutdown?(ev.diag.warn("shutdown may only be called once per MeterProvider"),[2]):(this._shutdown=!0,[4,Promise.all(this._sharedState.metricCollectors.map(function(e){return e.shutdown(t)}))]);case 1:return e.sent(),[2]}})})},t.prototype.forceFlush=function(t){return oB(this,void 0,void 0,function(){return oG(this,function(e){switch(e.label){case 0:return this._shutdown?(ev.diag.warn("invalid attempt to force flush after MeterProvider shutdown"),[2]):[4,Promise.all(this._sharedState.metricCollectors.map(function(e){return e.forceFlush(t)}))];case 1:return e.sent(),[2]}})})},t}(),oj=ey(eH(),1),oF=ey(eM(),1),oH=ey(rf(),1),oX=ey(ro(),1);eS();var oK=Symbol.for("@vercel/request-context");function oW(){return globalThis[oK]?.get()}var oY=ey(eH(),1);function oz(t){return Object.fromEntries(Object.entries(t).filter(([t,e])=>void 0!==e))}var o$={keys:t=>[],get:(t,e)=>t[e.toLocaleLowerCase()]};function oq(t){return(t&ev.TraceFlags.SAMPLED)!=0}eS();var oQ=class{constructor(t,e){this.processors=t,this.attributesFromHeaders=e,this.rootSpanIds=new Map,this.waitSpanEnd=new Map}forceFlush(){return Promise.all(this.processors.map(t=>t.forceFlush().catch(t=>{ev.diag.error("@vercel/otel: forceFlush failed:",t)}))).then(()=>{})}shutdown(){return Promise.all(this.processors.map(t=>t.shutdown().catch(()=>{}))).then(()=>{})}onStart(t,e){let{traceId:r,spanId:n,traceFlags:o}=t.spanContext(),i=!t.parentSpanId||!this.rootSpanIds.has(r);if(i?this.rootSpanIds.set(r,{rootSpanId:n,open:[]}):this.rootSpanIds.get(r)?.open.push(t),i&&oq(o)){let e=oW(),n=function(t=oW(),e){var r;if(!t)return;let n=e?function(t,e){if("function"==typeof t)return t(e,o$);let r={};for(let[n,o]of Object.entries(t)){let t=e[o.toLocaleLowerCase()];void 0!==t&&(r[n]=t)}return r}(e,t.headers):void 0;return oz({[oY.SemanticAttributes.HTTP_HOST]:t.headers.host,[oY.SemanticAttributes.HTTP_USER_AGENT]:t.headers["user-agent"],"http.referer":t.headers.referer,"vercel.request_id":(r=t.headers["x-vercel-id"])?r.split("::").at(-1):void 0,"vercel.matched_path":t.headers["x-matched-path"],"vercel.edge_region":t.headers["x-vercel-edge-region"],...n})}(e,this.attributesFromHeaders);n&&t.setAttributes(n),e&&e.waitUntil(async()=>{if(this.rootSpanIds.has(r)){let t=new Promise(t=>{this.waitSpanEnd.set(r,t)}),e;await Promise.race([t,new Promise(t=>{e=setTimeout(()=>{this.waitSpanEnd.delete(r),t(void 0)},50)})]),e&&clearTimeout(e)}return this.forceFlush()})}for(let r of this.processors)r.onStart(t,e)}onEnd(t){let{traceId:e,spanId:r,traceFlags:n}=t.spanContext(),o=oq(n),i=this.rootSpanIds.get(e),a=i?.rootSpanId===r;if(o){let e=function(t){let{kind:e,attributes:r}=t,{"operation.name":n,"resource.name":o,"span.type":i,"next.span_type":a,"http.method":s,"http.route":u}=r;if(n)return;let l=o??(s&&"string"==typeof s&&u&&"string"==typeof u?`${s} ${u}`:u);if(t.kind===ev.SpanKind.SERVER&&s&&u&&"string"==typeof s&&"string"==typeof u)return{"operation.name":"web.request","resource.name":l};let c=t.instrumentationLibrary.name,p=a??i;if(p&&"string"==typeof p){let t=oJ(c,p);return u?{"operation.name":t,"resource.name":l}:{"operation.name":t}}return{"operation.name":oJ(c,e===ev.SpanKind.INTERNAL?"":oZ[e])}}(t);e&&Object.assign(t.attributes,e)}if(a){if(this.rootSpanIds.delete(e),i.open.length>0){for(let t of i.open)if(!t.ended&&t.spanContext().spanId!==r)try{t.end()}catch(t){ev.diag.error("@vercel/otel: onEnd failed:",t)}}}else if(i)for(let t=0;t<i.open.length;t++)i.open[t]?.spanContext().spanId===r&&i.open.splice(t,1);for(let e of this.processors)e.onEnd(t);if(a){let t=this.waitSpanEnd.get(e);t&&(this.waitSpanEnd.delete(e),t())}}},oZ={[ev.SpanKind.INTERNAL]:"internal",[ev.SpanKind.SERVER]:"server",[ev.SpanKind.CLIENT]:"client",[ev.SpanKind.PRODUCER]:"producer",[ev.SpanKind.CONSUMER]:"consumer"};function oJ(t,e){if(!t)return e;let r=t.replace(/[ @./]/g,"_");return r.startsWith("_")&&(r=r.slice(1)),e?`${r}.${e}`:r}var o0=ey(rE(),1),o1=ey(rT(),1);eS();var o2=class extends o1.OTLPExporterBase{constructor(t={}){super(t),t.headers&&(this._headers=t.headers)}onShutdown(){ev.diag.debug("@vercel/otel/otlp: onShutdown")}onInit(){ev.diag.debug("@vercel/otel/otlp: onInit")}send(t,e,r){if(this._shutdownOnce.isCalled){ev.diag.debug("@vercel/otel/otlp: Shutdown already started. Cannot send objects");return}let n=this.convert(t),o,i,a;try{({body:o,contentType:i,headers:a}=this.toMessage(n))}catch(t){ev.diag.warn("@vercel/otel/otlp: no proto",t);return}let s=fetch(this.url,{method:"POST",body:o,headers:{...this._headers,...a,"Content-Type":i,"User-Agent":"OTel-OTLP-Exporter-JavaScript/0.46.0"},next:{internal:!0}}).then(t=>{ev.diag.debug("@vercel/otel/otlp: onSuccess",t.status,t.statusText),e(),t.arrayBuffer().catch(()=>{})}).catch(t=>{ev.diag.error("@vercel/otel/otlp: onError",t),r(t)}).finally(()=>{let t=this._sendingPromises.indexOf(s);this._sendingPromises.splice(t,1)});this._sendingPromises.push(s)}getDefaultUrl(t){throw Error("Method not implemented.")}};function o3(t){return"string"==typeof t.url?t.url:"http://localhost:4318/v1/traces"}var o4=class{constructor(t={}){this.impl=new o6(t)}export(t,e){this.impl.export(t,e)}shutdown(){return this.impl.shutdown()}forceFlush(){return this.impl.forceFlush()}},o6=class extends o2{convert(t){return(0,o0.createExportTraceServiceRequest)(t,{useHex:!0,useLongBits:!1})}toMessage(t){return{body:JSON.stringify(t),contentType:"application/json"}}getDefaultUrl(t){return o3(t)}},o8=ey(rE(),1),o5=ey(rx(),1);function o9(t,e){return null!=t.key&&e.uint32(10).string(t.key),null!=t.value&&(function t(e,r){return null!=e.stringValue&&r.uint32(10).string(e.stringValue),null!=e.boolValue&&r.uint32(16).bool(e.boolValue),null!=e.intValue&&r.uint32(24).int64(e.intValue),null!=e.doubleValue&&r.uint32(33).double(e.doubleValue),null!=e.arrayValue&&(function(e,r){if(null!=e.values&&e.values.length)for(let n=0;n<e.values.length;++n)t(e.values[n],r.uint32(10).fork()).ldelim();return r})(e.arrayValue,r.uint32(42).fork()).ldelim(),null!=e.kvlistValue&&(function(t,e){if(null!=t.values&&t.values.length)for(let r=0;r<t.values.length;++r)o9(t.values[r],e.uint32(10).fork()).ldelim();return e})(e.kvlistValue,r.uint32(50).fork()).ldelim(),null!=e.bytesValue&&r.uint32(58).bytes(e.bytesValue),r})(t.value,e.uint32(18).fork()).ldelim(),e}var o7=class{constructor(t={}){this.impl=new it(t)}export(t,e){this.impl.export(t,e)}shutdown(){return this.impl.shutdown()}forceFlush(){return this.impl.forceFlush()}},it=class extends o2{convert(t){return(0,o8.createExportTraceServiceRequest)(t,void 0)}toMessage(t){let e;return{body:(function(t,e){if(null!=t.resourceSpans&&t.resourceSpans.length)for(let r=0;r<t.resourceSpans.length;++r)(function(t,e){if(null!=t.resource&&(function(t,e){if(null!=t.attributes&&t.attributes.length)for(let r=0;r<t.attributes.length;++r)o9(t.attributes[r],e.uint32(10).fork()).ldelim();return null!=t.droppedAttributesCount&&e.uint32(16).uint32(t.droppedAttributesCount),e})(t.resource,e.uint32(10).fork()).ldelim(),null!=t.scopeSpans&&t.scopeSpans.length)for(let r=0;r<t.scopeSpans.length;++r)(function(t,e){if(null!=t.scope&&(function(t,e){if(null!=t.name&&e.uint32(10).string(t.name),null!=t.version&&e.uint32(18).string(t.version),null!=t.attributes&&t.attributes.length)for(let r=0;r<t.attributes.length;++r)o9(t.attributes[r],e.uint32(26).fork()).ldelim();return null!=t.droppedAttributesCount&&e.uint32(32).uint32(t.droppedAttributesCount),e})(t.scope,e.uint32(10).fork()).ldelim(),null!=t.spans&&t.spans.length)for(let r=0;r<t.spans.length;++r)(function(t,e){var r,n;if(null!=t.traceId&&e.uint32(10).bytes(t.traceId),null!=t.spanId&&e.uint32(18).bytes(t.spanId),null!=t.traceState&&e.uint32(26).string(t.traceState),null!=t.parentSpanId&&e.uint32(34).bytes(t.parentSpanId),null!=t.name&&e.uint32(42).string(t.name),null!=t.kind&&e.uint32(48).int32(t.kind),null!=t.startTimeUnixNano&&e.uint32(57).fixed64(t.startTimeUnixNano),null!=t.endTimeUnixNano&&e.uint32(65).fixed64(t.endTimeUnixNano),null!=t.attributes&&t.attributes.length)for(let r=0;r<t.attributes.length;++r)o9(t.attributes[r],e.uint32(74).fork()).ldelim();if(null!=t.droppedAttributesCount&&e.uint32(80).uint32(t.droppedAttributesCount),null!=t.events&&t.events.length)for(let r=0;r<t.events.length;++r)(function(t,e){if(null!=t.timeUnixNano&&e.uint32(9).fixed64(t.timeUnixNano),null!=t.name&&e.uint32(18).string(t.name),null!=t.attributes&&t.attributes.length)for(let r=0;r<t.attributes.length;++r)o9(t.attributes[r],e.uint32(26).fork()).ldelim();return null!=t.droppedAttributesCount&&e.uint32(32).uint32(t.droppedAttributesCount),e})(t.events[r],e.uint32(90).fork()).ldelim();if(null!=t.droppedEventsCount&&e.uint32(96).uint32(t.droppedEventsCount),null!=t.links&&t.links.length)for(let r=0;r<t.links.length;++r)(function(t,e){if(null!=t.traceId&&e.uint32(10).bytes(t.traceId),null!=t.spanId&&e.uint32(18).bytes(t.spanId),null!=t.traceState&&e.uint32(26).string(t.traceState),null!=t.attributes&&t.attributes.length)for(let r=0;r<t.attributes.length;++r)o9(t.attributes[r],e.uint32(34).fork()).ldelim();return null!=t.droppedAttributesCount&&e.uint32(40).uint32(t.droppedAttributesCount),e})(t.links[r],e.uint32(106).fork()).ldelim();return null!=t.droppedLinksCount&&e.uint32(112).uint32(t.droppedLinksCount),null!=t.status&&(r=t.status,n=e.uint32(122).fork(),null!=r.message&&n.uint32(18).string(r.message),null!=r.code&&n.uint32(24).int32(r.code),n).ldelim(),e})(t.spans[r],e.uint32(18).fork()).ldelim();return null!=t.schemaUrl&&e.uint32(26).string(t.schemaUrl),e})(t.scopeSpans[r],e.uint32(18).fork()).ldelim();return null!=t.schemaUrl&&e.uint32(26).string(t.schemaUrl),e})(t.resourceSpans[r],e.uint32(10).fork()).ldelim()}(t,e=new o5.Writer),e.finish()),contentType:"application/x-protobuf",headers:{accept:"application/x-protobuf"}}}getDefaultUrl(t){return o3(t)}};eS();var ie=ey(eH(),1),ir=class{constructor(t={}){this.instrumentationName="@vercel/otel/fetch",this.instrumentationVersion="1.0.0",this.config=t}getConfig(){return this.config}setConfig(){}setTracerProvider(t){this.tracerProvider=t}setMeterProvider(){}enable(){this.disable();let{tracerProvider:t}=this;if(!t)return;let e=t.getTracer(this.instrumentationName,this.instrumentationVersion),r=this.config.ignoreUrls??[],n=(t,e)=>{if(e?.opentelemetry?.ignore!==void 0)return e.opentelemetry.ignore;if(0===r.length)return!1;let n=t.toString();return r.some(t=>"string"==typeof t?"*"===t||n.startsWith(t):t.test(n))},o=process.env.VERCEL_URL||process.env.NEXT_PUBLIC_VERCEL_URL||null,i=process.env.VERCEL_BRANCH_URL||process.env.NEXT_PUBLIC_VERCEL_BRANCH_URL||null,a=this.config.propagateContextUrls??[],s=this.config.dontPropagateContextUrls??[],u=this.config.resourceNameTemplate,{attributesFromRequestHeaders:l,attributesFromResponseHeaders:c}=this.config,p=(t,e)=>{if(e?.opentelemetry?.propagateContext)return e.opentelemetry.propagateContext;let r=t.toString();return!(s.length>0&&s.some(t=>"string"==typeof t?"*"===t||r.startsWith(t):t.test(r)))&&(!!o&&"https:"===t.protocol&&(t.host===o||t.host===i||t.host===oW()?.headers.host)||!o&&"http:"===t.protocol&&"localhost"===t.hostname||a.some(t=>"string"==typeof t?"*"===t||r.startsWith(t):t.test(r)))};process.env.NEXT_OTEL_FETCH_DISABLED="1";let f=globalThis.fetch;this.originalFetch=f;let _=async(t,r)=>{var o;let i;if(r?.next?.internal)return f(t,r);let a=new Request(t instanceof Request?t.clone():t,r),s=new URL(a.url);if(n(s,r))return f(t,r);let _={[ie.SemanticAttributes.HTTP_METHOD]:a.method,[ie.SemanticAttributes.HTTP_URL]:a.url,[ie.SemanticAttributes.HTTP_HOST]:s.host,[ie.SemanticAttributes.HTTP_SCHEME]:s.protocol.replace(":",""),[ie.SemanticAttributes.NET_PEER_NAME]:s.hostname,[ie.SemanticAttributes.NET_PEER_PORT]:s.port},h=u?u.replace(/\{(?<temp1>[^{}]+)\}/g,(t,e)=>{let r=_[e];return void 0!==r?String(r):t}):-1===(i=(o=a.url).indexOf("?"))?o:o.substring(0,i),d=r?.opentelemetry?.spanName??`fetch ${a.method} ${a.url}`,E=ev.context.active(),g=e.startSpan(d,{kind:ev.SpanKind.CLIENT,attributes:{..._,"operation.name":`fetch.${a.method}`,"resource.name":h,...r?.opentelemetry?.attributes}},E);if(!g.isRecording()||!oq(g.spanContext().traceFlags))return g.end(),f(t,r);if(p(s,r)){let t=ev.trace.setSpan(E,g);ev.propagation.inject(t,a.headers,io)}l&&ia(g,l,a.headers);try{let e=Date.now(),n=await f(t,{...r,headers:a.headers}),o=Date.now()-e;return g.setAttribute(ie.SemanticAttributes.HTTP_STATUS_CODE,n.status),g.setAttribute("http.response_time",o),c&&ia(g,c,n.headers),n.status>=500&&ii(g,`Status: ${n.status} (${n.statusText})`),n.body?(function(t){let e=0,r=t.clone().body?.getReader();if(!r)return Promise.resolve(0);let n=()=>r.read().then(({done:t,value:r})=>{if(!t)return e+=r.byteLength,n()});return n().then(()=>e)})(n).then(t=>{g.isRecording()&&(g.setAttribute(ie.SemanticAttributes.HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED,t),g.end())},t=>{g.isRecording()&&(ii(g,t),g.end())}):g.end(),n}catch(t){throw ii(g,t),g.end(),t}};globalThis.fetch=_}disable(){this.originalFetch&&(globalThis.fetch=this.originalFetch)}},io={set(t,e,r){t.set(e,r)}};function ii(t,e){if(e instanceof Error)t.recordException(e),t.setStatus({code:ev.SpanStatusCode.ERROR,message:e.message});else{let r=String(e);t.setStatus({code:ev.SpanStatusCode.ERROR,message:r})}}function ia(t,e,r){for(let[n,o]of Object.entries(e)){let e=r.get(o);null!==e&&t.setAttribute(n,e)}}eS();var is=ey(ro(),1),iu="traceparent",il="tracestate",ic=class{fields(){return[iu,il]}inject(t,e,r){let n=ev.trace.getSpanContext(t);if(!n||(0,is.isTracingSuppressed)(t)||!(0,ev.isSpanContextValid)(n))return;let o=`00-${n.traceId}-${n.spanId}-0${Number(n.traceFlags||0).toString(16)}`;r.set(e,iu,o),n.traceState&&r.set(e,il,n.traceState.serialize())}extract(t,e,r){let n=r.get(e,iu);if(!n)return t;let o=Array.isArray(n)?n[0]:n;if("string"!=typeof o)return t;let i=function(t){let[e,r,n,o,i]=t.split("-");return e&&r&&n&&o&&2===e.length&&32===r.length&&16===n.length&&2===o.length&&("00"!==e||!i)?{traceId:r,spanId:n,traceFlags:parseInt(o,16)}:null}(o);if(!i)return t;i.isRemote=!0;let a=r.get(e,il);if(a){let t=Array.isArray(a)?a.join(","):a;i.traceState=(0,ev.createTraceState)("string"==typeof t?t:void 0)}return ev.trace.setSpanContext(t,i)}},ip=class{constructor(t={}){this.configuration=t}start(){var t,e,r;let n,o;let i=(n=(0,oF.parseEnvironment)(process.env),{...oF.DEFAULT_ENVIRONMENT,...n}),a=(0,oF.getEnvWithoutDefaults)(),s=this.configuration,u="edge",l=!!i.OTEL_SDK_DISABLED;if(a.OTEL_LOG_LEVEL&&ev.diag.setLogger(new ev.DiagConsoleLogger,{logLevel:a.OTEL_LOG_LEVEL}),l)return;let c=s.idGenerator??new r6,p=s.contextManager??new oH.AsyncLocalStorageContextManager;p.enable(),this.contextManager=p;let f=i.OTEL_SERVICE_NAME||s.serviceName||"app",_=new ni(oz({[oj.SemanticResourceAttributes.SERVICE_NAME]:f,"node.ci":!!process.env.CI||void 0,"node.env":"production",env:process.env.VERCEL_ENV||process.env.NEXT_PUBLIC_VERCEL_ENV,"vercel.region":process.env.VERCEL_REGION,"vercel.runtime":u,"vercel.sha":process.env.VERCEL_GIT_COMMIT_SHA||process.env.NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA,"vercel.host":process.env.VERCEL_URL||process.env.NEXT_PUBLIC_VERCEL_URL||void 0,"vercel.branch_host":process.env.VERCEL_BRANCH_URL||process.env.NEXT_PUBLIC_VERCEL_BRANCH_URL||void 0,"vercel.deployment_id":process.env.VERCEL_DEPLOYMENT_ID||void 0,[oj.SemanticResourceAttributes.SERVICE_VERSION]:process.env.VERCEL_DEPLOYMENT_ID,...s.attributes})),h=s.resourceDetectors??[nc];(s.autoDetectResources??!0)&&(_=_.merge(nf({detectors:h})));let d=(t=s.propagators,o=i.OTEL_PROPAGATORS&&i.OTEL_PROPAGATORS.length>0?i.OTEL_PROPAGATORS:void 0,(t??o??["auto"]).map(t=>{if("none"===t)return[];if("auto"===t)return ev.diag.debug("@vercel/otel: Configure propagators: tracecontext, baggage"),[new ic,new oX.W3CBaggagePropagator];if("tracecontext"===t)return ev.diag.debug("@vercel/otel: Configure propagator: tracecontext"),new ic;if("baggage"===t)return ev.diag.debug("@vercel/otel: Configure propagator: baggage"),new oX.W3CBaggagePropagator;if("string"==typeof t)throw Error(`Unknown propagator: "${t}"`);return t}).flat()),E=function(t,e){if(t&&"string"!=typeof t)return t;let r=t&&"auto"!==t?t:e.OTEL_TRACES_SAMPLER||i_;switch(ev.diag.debug("@vercel/otel: Configure sampler: ",r),r){case"always_on":return new rK;case"always_off":return new rX;case"parentbased_always_on":return new rY({root:new rK});case"parentbased_always_off":return new rY({root:new rX});case"traceidratio":return new rz(ih(e));case"parentbased_traceidratio":return new rY({root:new rz(ih(e))});default:return ev.diag.error(`@vercel/otel: OTEL_TRACES_SAMPLER value "${String(e.OTEL_TRACES_SAMPLER)} invalid, defaulting to ${i_}".`),new rK}}(s.traceSampler,i),g=[...(s.spanProcessors??["auto"]).map(t=>{if("auto"===t){if(process.env.VERCEL_OTEL_ENDPOINTS){let t=process.env.VERCEL_OTEL_ENDPOINTS_PORT||"4318",e=process.env.VERCEL_OTEL_ENDPOINTS_PROTOCOL||"http/protobuf";ev.diag.debug("@vercel/otel: Configure vercel otel collector on port: ",t,e);let r={url:`http://localhost:${t}/v1/traces`,headers:{}};return new r4("http/protobuf"===e?new o7(r):new o4(r))}return!s.traceExporter||"auto"===s.traceExporter||i.OTEL_EXPORTER_OTLP_TRACES_ENDPOINT||i.OTEL_EXPORTER_OTLP_ENDPOINT?new r4(function(t){let e=process.env.OTEL_EXPORTER_OTLP_TRACES_PROTOCOL??process.env.OTEL_EXPORTER_OTLP_PROTOCOL??"http/protobuf",r=function(t){let e=t.OTEL_EXPORTER_OTLP_TRACES_ENDPOINT;if(e&&"string"==typeof e)return e;let r=t.OTEL_EXPORTER_OTLP_ENDPOINT;return r&&"string"==typeof r?`${r}/${id}`:iE}(t),n={...oX.baggageUtils.parseKeyPairsIntoRecord(t.OTEL_EXPORTER_OTLP_HEADERS),...oX.baggageUtils.parseKeyPairsIntoRecord(t.OTEL_EXPORTER_OTLP_TRACES_HEADERS)};switch(ev.diag.debug("@vercel/otel: Configure trace exporter: ",e,r,`headers: ${Object.keys(n).join(",")||"<none>"}`),e){case"http/json":return new o4({url:r,headers:n});case"http/protobuf":return new o7({url:r,headers:n});default:return ev.diag.warn(`@vercel/otel: Unsupported OTLP traces protocol: ${e}. Using http/protobuf.`),new o7}}(i)):void 0}return t}).filter(ig),...s.traceExporter&&"auto"!==s.traceExporter?[new r4(s.traceExporter)]:[]];0===g.length&&ev.diag.warn("@vercel/otel: No span processors configured. No spans will be exported.");let T=new nT({resource:_,idGenerator:c,sampler:E,spanLimits:s.spanLimits});if(T.addSpanProcessor(new oQ(g,s.attributesFromHeaders)),T.register({contextManager:p,propagator:new oX.CompositePropagator({propagators:d})}),this.tracerProvider=T,s.logRecordProcessor){let t=new nU({resource:_});this.loggerProvider=t,t.addLogRecordProcessor(s.logRecordProcessor),ny.logs.setGlobalLoggerProvider(t)}if(s.metricReader||s.views){let t=new ok({resource:_,views:s.views??[]});s.metricReader&&t.addMetricReader(s.metricReader),ev.metrics.setGlobalMeterProvider(t),this.meterProvider=t}let y=(e=s.instrumentations,r=s.instrumentationConfig,(e??["auto"]).map(t=>"auto"===t?(ev.diag.debug("@vercel/otel: Configure instrumentations: fetch",r?.fetch),[new ir(r?.fetch)]):"fetch"===t?(ev.diag.debug("@vercel/otel: Configure instrumentations: fetch",r?.fetch),new ir(r?.fetch)):t).flat());this.disableInstrumentations=(0,nm.registerInstrumentations)({instrumentations:y}),ev.diag.info("@vercel/otel: started",f,u)}async shutdown(){let t=[];this.tracerProvider&&t.push(this.tracerProvider.shutdown()),this.loggerProvider&&t.push(this.loggerProvider.shutdown()),this.meterProvider&&t.push(this.meterProvider.shutdown()),ev.diag.info("@vercel/otel: shutting down",t.length,"edge"),await Promise.all(t),this.contextManager&&this.contextManager.disable();let{disableInstrumentations:e}=this;e&&e()}},i_="always_on";function ih(t){if(void 0===t.OTEL_TRACES_SAMPLER_ARG||""===t.OTEL_TRACES_SAMPLER_ARG)return ev.diag.error("@vercel/otel: OTEL_TRACES_SAMPLER_ARG is blank, defaulting to 1."),1;ev.diag.debug("@vercel/otel: Configure sampler probability: ",t.OTEL_TRACES_SAMPLER_ARG);let e=Number(t.OTEL_TRACES_SAMPLER_ARG);return isNaN(e)?(ev.diag.error(`@vercel/otel: OTEL_TRACES_SAMPLER_ARG=${t.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to 1.`),1):e<0||e>1?(ev.diag.error(`@vercel/otel: OTEL_TRACES_SAMPLER_ARG=${t.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to 1.`),1):e}var id="v1/traces",iE=`http://localhost:4318/${id}`;function ig(t){return null!=t}function iT(){!function(t){new ip(t?"string"==typeof t?{serviceName:t}:t:{}).start()}("next-app")}}},t=>{var e=t(t.s=673);(_ENTRIES="undefined"==typeof _ENTRIES?{}:_ENTRIES).middleware_instrumentation=e}]);
//# sourceMappingURL=edge-instrumentation.js.map